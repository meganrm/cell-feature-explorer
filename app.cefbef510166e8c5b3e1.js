webpackJsonp([1],{"+hq8":function(e,t,n){"use strict";function r(e){return{annotations:y.a.selectors.getAnnotations(e),clickedPoints:y.a.selectors.getClickedScatterPoints(e),plotDataArray:Object(m.a)(e)}}var o=n("RyI1"),a=n.n(o),l=n("q+Dy"),c=n.n(l),i=n("2247"),u=n.n(i),s=n("GiK3"),d=(n.n(s),n("RH2O")),f=n("mVQi"),p=n("HbvT"),h=n("1eoa"),y=n("M40V"),g=n("HU+u"),m=n("9fsL"),b=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),C=n("2L1U"),v=function(e){function t(t){var n=e.call(this,t)||this;return n.onPointClicked=n.onPointClicked.bind(n),n.onGroupSelected=n.onGroupSelected.bind(n),n}return b(t,e),t.prototype.componentWillMount=function(){this.props.requestCellLineData()},t.prototype.onPointClicked=function(e){var t=e.points,n=this.props,r=n.clickedPoints,o=n.handleSelectPoint,a=n.handleDeselectPoint;t.forEach(function(e){e.data.name===p.x&&(c()(r,e.pointIndex)?a(e.pointIndex):o(e.pointIndex))})},t.prototype.onGroupSelected=function(e){var t=e.points,n=this.props,r=n.handleSelectGroupOfPoints,o=n.handleSelectionToolUsed;r(Date.now().valueOf().toString(),u()(a()(t,function(e){return e.data.name===p.x}),"pointIndex")),o()},t.prototype.render=function(){var e=this.props,t=e.annotations,n=e.plotDataArray;return 0===n.length?null:s.createElement("div",{id:"main-plot",className:C.container},s.createElement(g.a,{axisId:p.A}),s.createElement(g.a,{axisId:p.B}),s.createElement(f.a,{plotDataArray:n,onPointClicked:this.onPointClicked,annotations:t,onGroupSelected:this.onGroupSelected}))},t}(s.Component),O={handleDeselectPoint:y.a.actions.deselectPoint,handleSelectGroupOfPoints:y.a.actions.selectGroupOfPoints,handleSelectPoint:y.a.actions.selectPoint,requestCellLineData:h.a.actions.requestCellLineData,requestFeatureData:h.a.actions.requestFeatureData};t.a=Object(d.b)(r,O)(v)},"/Z8b":function(e,t,n){"use strict";function r(e){var t=document.createElement("a");return t.href=e,t.download="true",t}var o=n("E0Bt"),a=n("HbvT"),l=n("ydF9"),c=n("Ejqr"),i=n("J9+0"),u=Object(o.a)({process:function(e){var t=e.action,n=e.getState,o=n(),i=Object(l.getFileInfo)(o),u=i[t.payload];r(a.r+"&id="+Object(c.a)(u)).click()},type:i.i});t.a=[u]},"1GmC":function(e,t,n){"use strict";var r=n("QoDT"),o=(n("JYrs"),n("FV1P")),a=(n("faxx"),n("IDpA")),l=(n("MIrP"),n("M+Z9")),c=n.n(l),i=n("GiK3"),u=n.n(i),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=function(e){var t=n.props.valueOptions;n.setState({inputValue:e}),n.props.onValueChange(t[e])},n.onChange=n.onChange.bind(n),n.state={inputValue:t.initIndex||0},n}return s(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props.initIndex;e.initIndex!==t&&this.setState({inputValue:t})},t.prototype.render=function(){var e=this.state.inputValue,t=this.props,n=t.disabled,l=t.label,i=t.valueOptions,s=function(e){return i[e].slice(0,2)};if(n)return null;var d={},f=c()(i,function(e,t,n){return e[n]=Math.round(Number(t)),e},d);return u.a.createElement(o.a,null,u.a.createElement(r.a,{span:6},u.a.createElement("span",null,l)),u.a.createElement(r.a,{span:14},u.a.createElement(a.a,{min:0,max:i.length-1,onChange:this.onChange,step:1,tipFormatter:s,value:"number"==typeof e?e:0,marks:f})))},t}(u.a.Component);t.a=d},"1eoa":function(e,t,n){"use strict";var r=n("36g3"),o=n("5uKg"),a=n("afXz"),l=n("ydF9"),c=n("8hXO");t.a={actions:r,logics:o.a,reducer:a.a,selectors:l,types:c}},"2L1U":function(e,t){e.exports={container:"style__container--3YOZp"}},"36g3":function(e,t,n){"use strict";function r(e){return{payload:e,type:c.a}}function o(e){return{payload:e,type:c.b}}function a(){return{type:c.c}}function l(){return{type:c.d}}Object.defineProperty(t,"__esModule",{value:!0}),t.receiveCellLineData=r,t.receiveMetadata=o,t.requestCellLineData=a,t.requestFeatureData=l;var c=n("LQGz")},"3r/D":function(e,t){e.exports={"color-menu":"style__color-menu--1I-K5",colorMenu:"style__color-menu--1I-K5",content:"style__content--11OH4",header:"style__header--3rm0D"}},"43Sq":function(e,t,n){"use strict";function r(e){return{clusteringAlgorithm:v.a.selectors.getClusteringAlgorithm(e),clusteringOptions:v.a.selectors.getClusteringRange(e),clusteringSetting:v.a.selectors.getClusteringSetting(e),colorBy:v.a.selectors.getColorBySelection(e),downloadConfig:v.a.selectors.getDownloadConfig(e),downloadUrls:Object(P.a)(e),filtersToExclude:v.a.selectors.getFiltersToExclude(e),proteinNames:C.a.selectors.getProteinNames(e),proteinPanelData:Object(P.c)(e),selectionSetsPanelData:Object(P.d)(e),showClusters:v.a.selectors.getClustersOn(e),someProteinsOff:Object(P.b)(e)}}var o=n("hK1P"),a=(n("rpBe"),n("QoDT")),l=(n("JYrs"),n("/RMs")),c=(n("Q6o6"),n("gtac")),i=(n("tDqI"),n("FV1P")),u=(n("faxx"),n("RyI1")),s=n.n(u),d=n("q+Dy"),f=n.n(d),p=n("hIkJ"),h=n.n(p),y=n("GiK3"),g=n.n(y),m=n("RH2O"),b=n("HbvT"),C=n("1eoa"),v=n("M40V"),O=n("J9+0"),w=n("wwhR"),_=n("qA08"),S=n("1GmC"),D=n("HU+u"),P=n("JTb2"),E=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l},k=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(j(arguments[t]));return e},x=n("M4gK"),A=c.a.Button,N=c.a.Group,I=l.a.Panel,B=function(e){function t(t){var n=e.call(this,t)||this;return n.onBarClicked=n.onBarClicked.bind(n),n.onColorBySwitchChanged=n.onColorBySwitchChanged.bind(n),n.onActivePanelChange=n.onActivePanelChange.bind(n),n.changeClusteringAlgorithm=n.changeClusteringAlgorithm.bind(n),n.changeClusteringNumber=n.changeClusteringNumber.bind(n),n.renderProteinPanel=n.renderProteinPanel.bind(n),n.renderSelectionPanel=n.renderSelectionPanel.bind(n),n.renderClusteringPanel=n.renderClusteringPanel.bind(n),n.allOnOff=n.allOnOff.bind(n),n.onProteinDownloadButtonClicked=n.onProteinDownloadButtonClicked.bind(n),n.onSelectionSetDownloadButtonClicked=n.onSelectionSetDownloadButtonClicked.bind(n),n}return E(t,e),t.prototype.componentDidUpdate=function(){var e=this.props,t=e.clusteringAlgorithm,n=e.handleChangeClusteringNumber,r=e.clusteringSetting,o=e.clusteringOptions;r||n(Object(O.e)(t),o[2])},t.prototype.onBarClicked=function(e){var t=e.target,n=this.props,r=n.handleFilterByProteinName,o=n.filtersToExclude;r(f()(o,t.value)?s()(o,function(e){return e!==t.value}):k(o,[t.value]))},t.prototype.onProteinDownloadButtonClicked=function(e){(0,this.props.handleChangeDownloadSettings)({key:e,type:b.p})},t.prototype.onSelectionSetDownloadButtonClicked=function(e){(0,this.props.handleChangeDownloadSettings)({key:e,type:b.q})},t.prototype.allOnOff=function(e){var t=e.target,n=this.props,r=n.handleFilterByProteinName,o=n.proteinNames;if(t.checked)return r([]);r(o)},t.prototype.onColorBySwitchChanged=function(e){var t=this.props.handleChangeAxis;if(e)return t(b.m,b.w);t(b.m,"Nuclear Volume (fL)")},t.prototype.onActivePanelChange=function(e){(0,this.props.onPanelClicked)(e)},t.prototype.changeClusteringAlgorithm=function(e){var t=e.target;(0,this.props.handleChangeClusteringAlgorithm)(t.value)},t.prototype.changeClusteringNumber=function(e){var t=this.props,n=t.handleChangeClusteringNumber,r=t.clusteringAlgorithm;n(Object(O.e)(r),e)},t.prototype.renderClusteringPanel=function(){var e=this.props,t=e.clusteringAlgorithm,n=e.clusteringSetting,r=e.handleClusteringToggle,o=e.clusteringOptions,a=e.showClusters,l=h()(o,n)||2;return g.a.createElement(g.a.Fragment,null,g.a.createElement(_.a,{defaultChecked:!1,handleChange:r,label:"Show clusters:"}),g.a.createElement(i.a,{className:x.colorByRow,type:"flex",align:"middle"},g.a.createElement(N,{onChange:this.changeClusteringAlgorithm,defaultValue:b.u,disabled:!a},g.a.createElement(A,{value:b.u},"KMeans"),g.a.createElement(A,{value:b.a},"Agglomerative"),g.a.createElement(A,{value:b.n},"DBSCAN"))),g.a.createElement(S.a,{disabled:!a,label:O.d[Object(O.e)(t)],onValueChange:this.changeClusteringNumber,valueOptions:o,initIndex:l}))},t.prototype.renderSelectionPanel=function(){var e=this.props,t=e.downloadUrls,n=e.downloadConfig,r=e.handleApplyColorSwitchChange,o=e.selectionSetsPanelData,a=e.handleCloseSelectionSet;return 0===o.length?g.a.createElement("span",null,"No selected sets yet. Make a selection on the plot using the",g.a.createElement("strong",null," Lasso Select")," or",g.a.createElement("strong",null," Box Select")," tools on the plot, and it will get saved here."):g.a.createElement(g.a.Fragment,null,g.a.createElement(_.a,{defaultChecked:!0,handleChange:r,label:"Show selections: "}),g.a.createElement("div",null,g.a.createElement(w.a,{closeable:!0,hideable:!1,handleCloseSelectionSet:a,panelData:o,downloadUrls:t,downloadConfig:n,handleDownload:this.onSelectionSetDownloadButtonClicked})))},t.prototype.renderProteinPanel=function(){var e=this.props,t=e.filtersToExclude,n=e.someProteinsOff,r=e.proteinPanelData,l=e.downloadUrls,c=e.downloadConfig;return g.a.createElement(g.a.Fragment,null,g.a.createElement(i.a,{className:x.colorByRow},g.a.createElement(a.a,{span:6},"Color by:"),g.a.createElement(a.a,{span:6},g.a.createElement(D.a,{axisId:b.m}))),g.a.createElement("div",null,g.a.createElement("div",{className:x.barChartHeader},g.a.createElement(o.a,{indeterminate:n,checked:0===t.length,onChange:this.allOnOff},"Show/Hide all"),g.a.createElement("span",{className:x.label},"# of cells")),g.a.createElement(w.a,{closeable:!1,panelData:r,downloadUrls:l,downloadConfig:c,hideable:!0,onBarClicked:this.onBarClicked,handleDownload:this.onProteinDownloadButtonClicked})))},t.prototype.render=function(){var e=this.props,t=e.defaultActiveKey,n=e.openKeys,r=e.panelKeys;return g.a.createElement(l.a,{defaultActiveKey:t,activeKey:n,onChange:this.onActivePanelChange},g.a.createElement(I,{key:r[0],header:"Data grouped by tagged structures"},this.renderProteinPanel()),g.a.createElement(I,{key:r[1],header:"Selected sets"},this.renderSelectionPanel()),g.a.createElement(I,{key:r[2],header:"Data group by clustering"},this.renderClusteringPanel()))},t}(g.a.Component),F={handleApplyColorSwitchChange:v.a.actions.toggleApplySelectionSetColors,handleChangeAxis:v.a.actions.changeAxis,handleChangeClusteringAlgorithm:v.a.actions.changeClusteringAlgorithm,handleChangeClusteringNumber:v.a.actions.changeClusteringNumber,handleChangeDownloadSettings:v.a.actions.changeDownloadSettings,handleCloseSelectionSet:v.a.actions.deselectGroupOfPoints,handleClusteringToggle:v.a.actions.toggleShowClusters,handleFilterByProteinName:v.a.actions.toggleFilterByProteinName};t.a=Object(m.b)(r,F)(B)},"5mEf":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"getPlotByOnX",function(){return w}),n.d(t,"getPlotByOnY",function(){return _}),n.d(t,"getClickedScatterPoints",function(){return S}),n.d(t,"getSelectedGroups",function(){return D}),n.d(t,"getColorBySelection",function(){return P}),n.d(t,"getProteinColors",function(){return E}),n.d(t,"getSelectionSetColors",function(){return j}),n.d(t,"getFiltersToExclude",function(){return k}),n.d(t,"getSelected3DCell",function(){return x}),n.d(t,"getApplyColorToSelections",function(){return A}),n.d(t,"getClustersOn",function(){return N}),n.d(t,"getClusteringAlgorithm",function(){return I}),n.d(t,"getNumberOfClusters",function(){return B}),n.d(t,"getClusteringDistance",function(){return F}),n.d(t,"getDownloadConfig",function(){return G}),n.d(t,"getSelected3DCellFOV",function(){return T}),n.d(t,"getSelected3DCellCellLine",function(){return M}),n.d(t,"getXValues",function(){return V}),n.d(t,"getYValues",function(){return K}),n.d(t,"getSelectedGroupsData",function(){return L}),n.d(t,"getPossibleColorByData",function(){return q}),n.d(t,"getFilteredOpacity",function(){return H}),n.d(t,"getOpacity",function(){return U}),n.d(t,"getColorByValues",function(){return R}),n.d(t,"getMainPlotData",function(){return z}),n.d(t,"getSelectedGroupKeys",function(){return J}),n.d(t,"getSelectedSetTotals",function(){return Q}),n.d(t,"getThumbnails",function(){return X}),n.d(t,"getAnnotations",function(){return Y}),n.d(t,"getClusteringRange",function(){return Z}),n.d(t,"getClusteringSetting",function(){return W}),n.d(t,"getClusteringResult",function(){return $});var r=n("kbi+"),o=n.n(r),a=n("q+Dy"),l=n.n(a),c=n("ktak"),i=n.n(c),u=n("2247"),s=n.n(u),d=n("94Kh"),f=n.n(d),p=n("M+Z9"),h=n.n(p),y=n("bndy"),g=(n.n(y),n("HbvT")),m=n("ydF9"),b=n("J9+0"),C=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},v=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l},O=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e},w=function(e){return e.selection.plotByOnX},_=function(e){return e.selection.plotByOnY},S=function(e){return e.selection.selectedPoints},D=function(e){return e.selection.selectedGroups},P=function(e){return e.selection.colorBy},E=function(e){return e.selection.proteinColors},j=function(e){return e.selection.selectedGroupColors},k=function(e){return e.selection.filterExclude},x=function(e){return e.selection.cellSelectedFor3D},A=function(e){return e.selection.applySelectionSetColoring},N=function(e){return e.selection.showClusters},I=function(e){return e.selection.clusteringAlgorithm},B=function(e){return e.selection.numberOfClusters},F=function(e){return e.selection.clusteringDistance},G=function(e){return e.selection.downloadConfig},T=Object(y.createSelector)([x,m.getFileInfo],function(e,t){var n,r=o()(t,(n={},n[g.d]=e,n));return r?r[g.s]:""}),M=Object(y.createSelector)([x,m.getFileInfo],function(e,t){var n,r=o()(t,(n={},n[g.d]=e,n));return r?r[g.h]:""}),V=Object(y.createSelector)([m.getMeasuredData,w],function(e,t){return s()(e,function(e){return e[t]})}),K=Object(y.createSelector)([m.getMeasuredData,_],function(e,t){return e.map(function(e){return e[t]})}),L=Object(y.createSelector)([m.getMeasuredData,D,w,_,j],function(e,t,n,r,o){var a=f()(t,function(t,a){return s()(t,function(t){var l=e[t];return{groupColor:o[a],x:l[n],y:l[r]}})}),l=h()(a,function(e,t){return O(e,t)},[]);return{color:s()(l,"groupColor"),x:s()(l,"x"),y:s()(l,"y")}}),q=Object(y.createSelector)([m.getFullMetaDataArray],function(e){return s()(e,function(e){var t;return C({},e.measured_features,(t={},t[g.w]=e.file_info[g.w],t))})}),H=Object(y.createSelector)([P,k,m.getProteinLabels],function(e,t,n){return s()(n,function(e){return l()(t,e)?0:g.t.unselectedCircleOpacity})}),U=Object(y.createSelector)([P,k,m.getProteinNames,m.getProteinLabels],function(e,t,n,r){var o;return o=e===g.w?n:r,s()(o,function(e){return l()(t,e)?0:g.t.unselectedCircleOpacity})}),R=Object(y.createSelector)([q,P],function(e,t){return s()(e,t)}),z=Object(y.createSelector)([V,K,R,U,P,E,m.getProteinNames],function(e,t,n,r,o,a,l){return{color:o===g.w?null:n,groupBy:o===g.w,groupSettings:o===g.w?s()(l,function(e,t){return{color:a[t],name:e,opacity:r[t]}}):null,groups:n,opacity:r,x:e,y:t}}),J=Object(y.createSelector)([D],function(e){return i()(e)}),Q=Object(y.createSelector)([D],function(e){return s()(e,function(e){return e.length})}),X=Object(y.createSelector)([m.getFileInfo,S],function(e,t){return t.map(function(t){var n=e[t][g.d],r=e[t][g.h];return{cellID:n,pointIndex:t,src:"/"+r+"/"+r+"_"+e[t][g.s]+"_"+n+".png"}})}),Y=Object(y.createSelector)([m.getMeasuredData,m.getFileInfo,S,w,_],function(e,t,n,r,o){return n.map(function(n){var a=t[n][g.d],l=t[n][g.s];return{cellID:a,cellLine:t[n][g.h],fovID:l,pointIndex:n,x:e[n][r],y:e[n][o]}})}),Z=Object(y.createSelector)([m.getClusterData,I],function(e,t){return e[0]?i()(e[0][t]):[]}),W=Object(y.createSelector)([I,F,B],function(e,t,n){return Object(b.e)(e)===g.k?t:n}),$=Object(y.createSelector)([m.getClusterData,I,W,V,K,H],function(e,t,n,r,o,a){return{color:s()(e,function(e){return e[t][n]}),opacity:a,x:r,y:o}})},"5uKg":function(e,t,n){"use strict";var r=n("ktak"),o=n.n(r),a=n("2247"),l=n.n(a),c=n("M+Z9"),i=n.n(c),u=n("yG5q"),s=n.n(u),d=n("E0Bt"),f=n("HbvT"),p=n("98+/"),h=n("J9+0"),y=n("36g3"),g=n("LQGz"),m=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},b=Object(d.a)({process:function(e,t,n){var r=e.baseApiUrl;return e.httpClient.get(r+"/cell-line-def.json").then(function(e){return e.data}).then(function(e){return i()(e,function(e,t){var n;return e[t[f.e]]=(n={},n[f.g]=t[f.g],n[f.f]=t[f.f],n),e},{})}).then(function(e){return t(Object(y.receiveCellLineData)(e))}).then(function(){return t(Object(y.requestFeatureData)())}).catch(function(e){console.log(e)}).then(function(){return n()})},type:g.c}),C=Object(d.a)({process:function(e,t,n){var r=e.baseApiUrl,a=e.getState;return e.httpClient.get(r+"/cell-feature-analysis.json").then(function(e){return e.data}).then(function(e){var t=a().metadata.cellLineDefs;return s()(l()(e,function(e){var n;return{clusters:e.clusters,file_info:m({},e.file_info,(n={},n[f.w]=t[e.file_info[f.h]][f.f],n)),measured_features:e.measured_features}}))}).then(function(e){t(Object(y.receiveMetadata)(e)),l()(e[0].clusters,function(e,n){var r=o()(e)[Math.floor(o()(e).length/2)];t(Object(p.changeClusteringNumber)(Object(h.e)(n),r))})}).catch(function(e){console.log(e)}).then(function(){return n()})},type:g.d});t.a=[b,C]},"8hXO":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("HbvT")},"98+/":function(e,t,n){"use strict";function r(e,t){return{axisId:e,payload:t,type:m.a}}function o(e,t){return{key:e,payload:t,type:m.q}}function a(e){return{payload:e,type:m.g}}function l(e){return{payload:e,type:m.h}}function c(e){return{payload:e,type:m.r}}function i(){return{type:m.f}}function u(e){return{payload:e,type:m.u}}function s(e){return{payload:e,type:m.o}}function d(e){return{payload:e,type:m.s}}function f(e){return{payload:e,type:m.b}}function p(e,t){return{clusteringKey:e,payload:t,type:m.c}}function h(e){return{payload:e,type:m.t}}function y(e){return{payload:e,type:m.p}}function g(e){return{payload:e,type:m.i}}Object.defineProperty(t,"__esModule",{value:!0}),t.changeAxis=r,t.selectGroupOfPoints=o,t.deselectGroupOfPoints=a,t.deselectPoint=l,t.selectPoint=c,t.clearAllSelectedPoints=i,t.toggleFilterByProteinName=u,t.selectCellFor3DViewer=s,t.toggleApplySelectionSetColors=d,t.changeClusteringAlgorithm=f,t.changeClusteringNumber=p,t.toggleShowClusters=h,t.changeDownloadSettings=y,t.downloadImage=g;var m=n("J9+0")},"9fsL":function(e,t,n){"use strict";function r(e){return!0===e.groupBy}function o(e,t){return r(t)?p({},e,{transforms:[{groups:t.groups,nameformat:"%{group}",styles:u()(t.groupSettings,function(e,t){return{target:e.name,value:{marker:{color:e.color,opacity:e.opacity}}}}),type:"groupby"}]}):p({},e,{marker:p({},e.marker,{color:t.color,opacity:t.opacity||d.t.unselectedCircleOpacity})})}function a(e){return o({marker:{size:d.t.circleRadius,symbol:"circle"},mode:"markers",name:e.plotName,showlegend:!1,type:"scattergl",x:e.x,y:e.y,z:[]},e)}function l(e){return{marker:{color:d.t.histogramColor,line:{color:d.t.textColor,width:1}},name:"x histogram",nbinsx:60,showlegend:!1,type:"histogram",x:e,yaxis:"y2"}}function c(e){return{marker:{color:d.t.histogramColor,line:{color:d.t.textColor,width:1}},name:"y histogram",nbinsy:60,showlegend:!1,type:"histogram",xaxis:"x2",y:e}}n.d(t,"a",function(){return y});var i=n("2247"),u=n.n(i),s=n("bndy"),d=(n.n(s),n("HbvT")),f=n("5mEf"),p=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},h=Object(s.createSelector)([f.getMainPlotData,f.getApplyColorToSelections,f.getClustersOn,f.getSelectedGroupsData,f.getClusteringResult],function(e,t,n,o,a){var l=p({},e,{groupSettings:r(e)?p({},e.groupSettings):null,plotName:d.x}),c=t?p({},o,{groupBy:!1,plotName:d.y}):null;return{clusteringPlotData:n?p({},a,{groupBy:!1,plotName:d.j}):null,mainPlotData:l,selectedGroupPlotData:c}}),y=Object(s.createSelector)([h],function(e){var t=e.mainPlotData,n=e.selectedGroupPlotData,r=e.clusteringPlotData,o=[l(t.x),c(t.y),a(t)];return r&&o.push(a(r)),n&&o.push(a(n)),o})},CMO8:function(e,t){},CXUS:function(e,t){e.exports={"cell-viewer":"style__cell-viewer--2yy3F",cellViewer:"style__cell-viewer--2yy3F"}},Cwrf:function(e,t){e.exports={"plot-by-on-x":"style__plot-by-on-x--2opAx",plotByOnX:"style__plot-by-on-x--2opAx","plot-by-on-y":"style__plot-by-on-y--2d4YU",plotByOnY:"style__plot-by-on-y--2d4YU"}},Ejqr:function(e,t,n){"use strict";function r(e,t){return i.b+"/"+e.toUpperCase()+"/"+t.toUpperCase()}function o(e,t){return function(n,r){void 0===n&&(n=t);var o=e[r.type];return o&&o.accepts(r)?o.perform(n,r):n}}function a(e){return e&&e.batch&&Array.isArray(e.payload)}function l(e){return function t(n,r){return a(r)?r.payload.reduce(t,n):e(n,r)}}function c(e){return e.CellLineName+"_"+e.FOVId+"_"+e.CellId}t.c=r,t.d=o,t.b=l,t.a=c;var i=n("HbvT");r("batch","batch-actions")},EsV9:function(e,t,n){"use strict";var r=n("zwGx"),o=(n("crfj"),n("jf3V")),a=(n("7WgF"),n("FC3+")),l=(n("baa2"),n("aOwA")),c=(n("Qbm7"),n("q+Dy")),i=n.n(c),u=n("WIDu"),s=n.n(u),d=n("GiK3"),f=n.n(d),p=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},y=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l},g=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e},m=n("WeNn"),b="alreadyDownloaded",C=function(e){function t(t){var n=e.call(this,t)||this;return n.onClose=n.onClose.bind(n),n.onDownload=n.onDownload.bind(n),n.saveDownloadUrl=n.saveDownloadUrl.bind(n),n.handleMenuClick=n.handleMenuClick.bind(n),n.handleDownloadMenuVisibleChange=n.handleDownloadMenuVisibleChange.bind(n),n.state={alreadyDownloaded:localStorage.getItem(b)?JSON.parse(localStorage.getItem(b)):{},downloadMenuVisible:!1},n}return p(t,e),t.prototype.onClose=function(e){var t=e.currentTarget,n=this.props.handleClose;t&&t.id&&n&&n(t.id)},t.prototype.onDownload=function(e){var t=e.currentTarget,n=this.props.handleDownload;t&&t.id&&n&&n(t.id)},t.prototype.saveDownloadUrl=function(e){var t,n,r=this.props.downloadConfig,o=this.state.alreadyDownloaded,a=o[r.key];a?this.setState({alreadyDownloaded:h({},o,(t={},t[r.key]=s()(g(a,[e.key])),t))}):this.setState({alreadyDownloaded:h({},o,(n={},n[r.key]=[e.key],n))})},t.prototype.handleDownloadMenuVisibleChange=function(e){localStorage.setItem(b,JSON.stringify(this.state.alreadyDownloaded)),this.setState({downloadMenuVisible:!!e})},t.prototype.handleMenuClick=function(){var e=this.props,t=e.downloadUrls,n=e.downloadConfig,r=this.state.alreadyDownloaded[n.key];r&&r.length===t.length&&this.setState({downloadMenuVisible:!1})},t.prototype.render=function(){var e=this,t=this.props,n=t.id,c=t.downloadUrls,u=t.downloadConfig,s=this.state.alreadyDownloaded[u.key],d=f.a.createElement(l.a,{onClick:this.handleMenuClick},c.map(function(t,n){return f.a.createElement(l.a.Item,{key:n,onClick:e.saveDownloadUrl},i()(s,n.toString())?f.a.createElement(a.a,{type:"check"}):f.a.createElement(a.a,{type:"download"}),f.a.createElement("a",{href:t}," data chunk ",n+1," "))}));return f.a.createElement("div",{className:m.container},f.a.createElement(o.a,{overlay:d,trigger:["click"],onVisibleChange:this.handleDownloadMenuVisibleChange,visible:this.state.downloadMenuVisible},f.a.createElement(r.a,{size:"small",className:"ant-dropdown-link",id:n,onClick:this.onDownload},f.a.createElement(a.a,{type:"download"}))))},t.defaultProps={closeable:!1,downloadUrls:[],hideable:!0},t}(f.a.Component);t.a=C},FB2F:function(e,t,n){"use strict";var r=n("GiK3"),o=n.n(r),a=n("HbvT"),l=n("CXUS"),c=function(e){var t=e.cellId,n=e.cellLineName,r=e.fovId;if(!t)return null;var c="";return c=r?"fovId="+r+"&cellId="+t+"&cellLine="+n:"legacyName_1_2="+t,o.a.createElement("iframe",{id:"three-d-viewer",frameBorder:0,className:l.cellViewer,src:a.i+"?"+c})};t.a=c},"HU+u":function(e,t,n){"use strict";function r(e){return{colorByValue:Object(p.getColorBySelection)(e),featureNames:Object(d.getFeatureNames)(e),xDropDownValue:Object(p.getPlotByOnX)(e),yDropDownValue:Object(p.getPlotByOnY)(e)}}var o=n("8/ER"),a=(n("cwkc"),n("q+Dy")),l=n.n(a),c=n("GiK3"),i=n.n(c),u=n("RH2O"),s=n("HbvT"),d=n("ydF9"),f=n("98+/"),p=n("5mEf"),h=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l},g=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e},m=n("Cwrf"),b=o.a.Option,C=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChange=n.handleChange.bind(n),n}return h(t,e),t.prototype.handleChange=function(e){var t=this.props,n=t.axisId;(0,t.handleChangeAxis)(n,e)},t.prototype.render=function(){var e,t,n=this.props,r=n.axisId,a=n.colorByValue,c=n.xDropDownValue,u=n.yDropDownValue,d=n.featureNames,f=(e={},e[s.A]=c,e[s.B]=u,e[s.m]=a,e);return t=r!==s.m||l()(d,s.w)?d:g([s.w],d),i.a.createElement("div",{className:m[r]},i.a.createElement(o.a,{defaultValue:f[r],onChange:this.handleChange},t.map(function(e){return i.a.createElement(b,{value:e,key:e},e===s.w?"Protein":e)})))},t}(i.a.Component),v={handleChangeAxis:f.changeAxis};t.a=Object(u.b)(r,v)(C)},HbvT:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"A",function(){return o}),n.d(t,"B",function(){return a}),n.d(t,"x",function(){return l}),n.d(t,"y",function(){return c}),n.d(t,"j",function(){return i}),n.d(t,"m",function(){return u}),n.d(t,"d",function(){return s}),n.d(t,"h",function(){return d}),n.d(t,"s",function(){return f}),n.d(t,"w",function(){return p}),n.d(t,"e",function(){return h}),n.d(t,"g",function(){return y}),n.d(t,"f",function(){return g}),n.d(t,"p",function(){return m}),n.d(t,"q",function(){return b}),n.d(t,"a",function(){return C}),n.d(t,"u",function(){return v}),n.d(t,"n",function(){return O}),n.d(t,"l",function(){return w}),n.d(t,"k",function(){return _}),n.d(t,"i",function(){return S}),n.d(t,"c",function(){return D}),n.d(t,"z",function(){return P}),n.d(t,"r",function(){return E}),n.d(t,"o",function(){return j}),n.d(t,"v",function(){return k}),n.d(t,"t",function(){return x});var r="cell-feature-explorer",o="plotByOnX",a="plotByOnY",l="features-scatter-plot",c="selections-scatter-plot",i="clusters-plot-name",u="colorBy",s="CellId",d="CellLineName",f="FOVId",p="structureProteinName",h="CellLineId/Name",y="StructureId/Name",g="ProteinId/DisplayName",m=(Object.freeze([s,d,f]),"protein"),b="selectionSet",C="Agglomerative",v="KMeans",O="DBSCAN",w="numberOfClusters",_="clusteringDistance",S="https://meganrm.github.io/website-3d-cell-viewer/",D="https://raw.githubusercontent.com/AllenInstitute/cell-feature-data/master/",P="https://s3-us-west-2.amazonaws.com/bisque.allencell.org/v1.3.0/Cell-Viewer_Thumbnails",E="https://files.allencell.org/api/2.0/file/download?collection=cellviewer-1-3",j="#6e6e6e",k="#000",x={backgroundColor:"rgba(0,0,0,0)",cellName:s,chartParent:"ace-scatter-chart",circleRadius:4,histogramColor:"rgb(164,162,164)",legend:{font:{color:"rgb(255,255,255)"},orientation:"h",y:60},margin:{bottom:10,left:25,right:25,top:10},moveDropdownCutoffWidth:370,showLegendCutoffHeight:635,showLegendCutoffWidth:692,textColor:"rgb(255,255,255)",unselectedCircleOpacity:.5,xAxisInitial:"Nuclear Volume (fL)",yAxisInitial:"Cellular Volume (fL)"}},HtOV:function(e,t){e.exports={container:"style__container--1umfk"}},"J9+0":function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"q",function(){return c}),n.d(t,"h",function(){return i}),n.d(t,"r",function(){return u}),n.d(t,"f",function(){return s}),n.d(t,"u",function(){return d}),n.d(t,"o",function(){return f}),n.d(t,"s",function(){return p}),n.d(t,"g",function(){return h}),n.d(t,"c",function(){return y}),n.d(t,"b",function(){return g}),n.d(t,"t",function(){return m}),n.d(t,"p",function(){return b}),n.d(t,"i",function(){return C}),n.d(t,"k",function(){return v}),n.d(t,"l",function(){return O}),n.d(t,"m",function(){return w}),n.d(t,"j",function(){return _}),n.d(t,"n",function(){return S}),n.d(t,"e",function(){return D}),n.d(t,"d",function(){return P});var r,o=n("HbvT"),a=n("Ejqr"),l=Object(a.c)("selection","deselect-file"),c=Object(a.c)("selection","select_group"),i=Object(a.c)("selection","deselect-point"),u=Object(a.c)("selection","select-point"),s=Object(a.c)("selection","deselect-all-points"),d=Object(a.c)("selection","toggle-filter-by-protein-name"),f=Object(a.c)("selection","open-cell-in-3d"),p=Object(a.c)("selection","apply-selection-set-color"),h=Object(a.c)("selection","deselect-group"),y=Object(a.c)("selection","change-cluster-number"),g=Object(a.c)("selection","change-clustering-algorithm"),m=Object(a.c)("selection","toggle-clusters-on"),b=Object(a.c)("selection","select-download-id"),C=Object(a.c)("selection","download-image"),v=o.w,O="Nuclear Volume (fL)",w="Cellular Volume (fL)",_=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#ff00de","#24bcfa","#84df11","#ecc560","#ff72ff","#f58117","#f8311b","#5791db","#98b0d6","#11a89a","#a70009","#ff6200","#fddb02","#f7db78","#b15928","#f9a558"],S=["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],D=function(e){var t;return(t={},t[o.a]=o.l,t[o.n]=o.k,t[o.u]=o.l,t)[e]||o.l},P=(r={},r[o.l]="number of clusters",r[o.k]="distance between clusters",r)},JTb2:function(e,t,n){"use strict";n.d(t,"b",function(){return b}),n.d(t,"c",function(){return v}),n.d(t,"d",function(){return O}),n.d(t,"a",function(){return _});var r=n("O3gb"),o=n.n(r),a=n("q+Dy"),l=n.n(a),c=n("2247"),i=n.n(c),u=n("M+Z9"),s=n.n(u),d=n("L8MQ"),f=n.n(d),p=n("bndy"),h=(n.n(p),n("HbvT")),y=n("ydF9"),g=n("5mEf"),m=n("Ejqr"),b=Object(p.createSelector)([g.getFiltersToExclude,y.getProteinNames],function(e,t){return e.length>0&&e.length!==t.length}),C=Object(p.createSelector)([g.getColorBySelection,g.getProteinColors,y.getProteinNames,g.getFiltersToExclude],function(e,t,n,r){return e===h.w?n.map(function(e,n){return l()(r,e)?h.v:t[n]}):n.map(function(e,t){return l()(r,e)?h.v:h.o})}),v=Object(p.createSelector)([y.getProteinNames,g.getFiltersToExclude,y.getProteinTotals,C],function(e,t,n,r){return i()(n,function(n,o){return{checked:!l()(t,e[o]),color:r[o],id:e[o],name:e[o],total:n}})}),O=Object(p.createSelector)([g.getApplyColorToSelections,g.getSelectionSetColors,g.getSelectedGroupKeys,g.getSelectedSetTotals],function(e,t,n,r){return i()(n,function(n,o){var a=e?f()(t)[o]:h.o,l=Number(n)?o:n;return{color:a,id:n.toString(),name:l.toString(),total:r[o]}})}),w=Object(p.createSelector)([y.getProteinNames,y.getFileInfo,g.getDownloadConfig,g.getSelectedGroups],function(e,t,n,r){var o=[];if(n.type===h.p)return s()(t,function(e,t){return t[h.w]===n.key&&e.push(Object(m.a)(t)),e},o);if(n.type===h.q){var a=r[n.key];return s()(t,function(e,t,n){return l()(a,n)&&e.push(Object(m.a)(t)),e},o)}return o}),_=Object(p.createSelector)([w],function(e){var t=o()(e,300);return i()(t,function(e){return""+h.r+i()(e,function(e){return"&id="+e}).join("")})})},LQGz:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return l}),n.d(t,"c",function(){return c});var r=n("Ejqr"),o=Object(r.c)("metadata","receive"),a=Object(r.c)("metadata","request"),l=Object(r.c)("celllinedata","receive"),c=Object(r.c)("celllinedata","request")},M40V:function(e,t,n){"use strict";var r=n("98+/"),o=n("/Z8b"),a=n("OkoZ"),l=n("5mEf"),c=n("hXJK");n.n(c);t.a={actions:r,logics:o.a,reducer:a.a,selectors:l,types:c}},M4gK:function(e,t){e.exports={"color-by-row":"style__color-by-row--3RQTv",colorByRow:"style__color-by-row--3RQTv","bar-chart-header":"style__bar-chart-header--2oblB",barChartHeader:"style__bar-chart-header--2oblB"}},NGSD:function(e,t,n){"use strict";var r=n("M4IF"),o=(n("Vg41"),n("zwGx")),a=(n("crfj"),n("hK1P")),l=(n("rpBe"),n("GiK3")),c=n.n(l),i=n("EsV9"),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=n("zH//"),d=function(e){function t(t){var n=e.call(this,t)||this;return n.onClose=n.onClose.bind(n),n}return u(t,e),t.prototype.onClose=function(e){var t=e.currentTarget,n=this.props.handleClose;t&&t.id&&n&&n(t.id)},t.prototype.render=function(){var e=this.props,t=e.closeable,n=e.hideable,l=e.id,u=e.color,d=e.name,f=e.total,p=e.onBarClicked,h=e.checked,y=e.downloadUrls,g=e.downloadConfig,m=e.handleDownload;return c.a.createElement("div",{className:s.container},c.a.createElement("div",{className:s.firstColumn},n&&c.a.createElement(a.a,{onChange:p,value:l,defaultChecked:!0,checked:h}),c.a.createElement(r.a,{style:{backgroundColor:u,padding:4},dot:!0}),c.a.createElement("span",{className:s.label},d)),c.a.createElement("div",null,c.a.createElement("span",{className:s.label},f),c.a.createElement(i.a,{color:u,id:l,name:d,total:f,downloadConfig:g,downloadUrls:y,handleDownload:m}),t&&c.a.createElement(o.a,{icon:"close",size:"small",id:l,ghost:!0,onClick:this.onClose})))},t.defaultProps={closeable:!1,downloadUrls:[],hideable:!0},t}(c.a.Component);t.a=d},NThS:function(e,t,n){"use strict";var r=n("3Coi"),o=(n("lzJq"),n("FC3+")),a=(n("baa2"),n("GiK3")),l=n.n(a),c=r.a.Link,i=function(){return l.a.createElement(r.a,null,l.a.createElement(c,{href:"#main-plot",title:l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{type:"dot-chart"}),l.a.createElement("span",null," Plot "))}),l.a.createElement(c,{href:"#gallery",title:l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{type:"picture"}),l.a.createElement("span",null," Gallery "))}),l.a.createElement(c,{href:"#three-d-viewer",title:l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{type:"sync"}),l.a.createElement("span",null," 3D viewer "))}))};t.a=i},OkoZ:function(e,t,n){"use strict";var r,o=n("RyI1"),a=n.n(o),l=n("6PBa"),c=n.n(l),i=n("HbvT"),u=n("Ejqr"),s=n("J9+0"),d=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},f=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l},p=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e},h={applySelectionSetColoring:!0,cellSelectedFor3D:null,clusteringAlgorithm:i.u,clusteringDistance:"",colorBy:s.k,downloadConfig:{key:"",type:""},filterExclude:[],numberOfClusters:"",plotByOnX:s.l,plotByOnY:s.m,proteinColors:s.j,selectedGroupColors:{},selectedGroups:{},selectedPoints:[],showClusters:!1},y=(r={},r[s.a]={accepts:function(e){return e.type===s.a},perform:function(e,t){var n;return d({},e,(n={},n[t.axisId]=t.payload,n))}},r[s.o]={accepts:function(e){return e.type===s.o},perform:function(e,t){return d({},e,{cellSelectedFor3D:t.payload})}},r[s.q]={accepts:function(e){return e.type===s.q},perform:function(e,t){var n,r;return d({},e,{selectedGroupColors:d({},e.selectedGroupColors,(n={},n[t.key]=s.n.splice(0,1)[0],n)),selectedGroups:d({},e.selectedGroups,(r={},r[t.key]=t.payload,r))})}},r[s.g]={accepts:function(e){return e.type===s.g},perform:function(e,t){return d({},e,{selectedGroupColors:c()(e.selectedGroupColors,function(e,n){return n.toString()!==t.payload.toString()}),selectedGroups:c()(e.selectedGroups,function(e,n){return n.toString()!==t.payload.toString()})})}},r[s.h]={accepts:function(e){return e.type===s.h},perform:function(e,t){return d({},e,{selectedPoints:a()(e.selectedPoints,function(e){return e!==t.payload})})}},r[s.r]={accepts:function(e){return e.type===s.r},perform:function(e,t){return d({},e,{selectedPoints:p(e.selectedPoints,[t.payload])})}},r[s.f]={accepts:function(e){return e.type===s.f},perform:function(e,t){return d({},e,{selectedPoints:p(h.selectedPoints)})}},r[s.u]={accepts:function(e){return e.type===s.u},perform:function(e,t){return d({},e,{filterExclude:t.payload})}},r[s.s]={accepts:function(e){return e.type===s.s},perform:function(e,t){return d({},e,{applySelectionSetColoring:t.payload})}},r[s.b]={accepts:function(e){return e.type===s.b},perform:function(e,t){return d({},e,{clusteringAlgorithm:t.payload})}},r[s.c]={accepts:function(e){return e.type===s.c},perform:function(e,t){var n;return d({},e,(n={},n[t.clusteringKey]=t.payload,n))}},r[s.t]={accepts:function(e){return e.type===s.t},perform:function(e,t){return d({},e,{showClusters:t.payload})}},r[s.p]={accepts:function(e){return e.type===s.p},perform:function(e,t){return d({},e,{downloadConfig:t.payload})}},r);t.a=Object(u.d)(y,h)},Sjo9:function(e,t,n){"use strict";var r=n("hRRF"),o=(n("jIi2"),n("FC3+")),a=(n("baa2"),n("GiK3")),l=n.n(a),c=n("HbvT"),i=r.a.Meta,u=n("HtOV"),s=function(e){var t=function(){e.handleDeselectPoint(e.pointIndex)},n=function(){setTimeout(window.scroll({behavior:"smooth",left:0,top:2500}),3e3),e.handleOpenIn3D(e.title)},a=function(){e.handleDownloadImage(e.pointIndex)};return l.a.createElement(r.a,{className:u.container,loading:e.empty,cover:e.src&&l.a.createElement("img",{alt:"thumbnail of microscopy image",src:c.z+"/"+e.src}),actions:e.empty?[]:[l.a.createElement("span",{key:e.title+"-load",onClick:n},"3D"),l.a.createElement(o.a,{key:e.title+"-download",type:"download",onClick:a}),l.a.createElement(o.a,{key:e.title+"-close",type:"close",onClick:t})]},l.a.createElement(i,{title:e.title}))};t.a=s},WeNn:function(e,t){e.exports={container:"style__container--1QLpn"}},afXz:function(e,t,n){"use strict";var r,o=n("Ejqr"),a=n("LQGz"),l=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},c={cellLineDefs:{},featureData:[]},i=(r={},r[a.b]={accepts:function(e){return e.type===a.b},perform:function(e,t){return l({},e,{featureData:t.payload})}},r[a.a]={accepts:function(e){return e.type===a.a},perform:function(e,t){return l({},e,{cellLineDefs:t.payload})}},r);t.a=Object(o.d)(i,c)},hXJK:function(e,t){},kZ4z:function(e,t){e.exports={"gallery-header":"style__gallery-header--24Z5z",galleryHeader:"style__gallery-header--24Z5z"}},mLcw:function(e,t,n){"use strict";function r(e){return{data:Object(d.getThumbnails)(e)}}var o=n("zwGx"),a=(n("crfj"),n("FC3+")),l=(n("baa2"),n("peDk")),c=(n("tKBd"),n("GiK3")),i=(n.n(c),n("RH2O")),u=n("Sjo9"),s=n("98+/"),d=n("5mEf"),f=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=n("kZ4z"),h=function(e){function t(t){var n=e.call(this,t)||this;return n.renderGalleryCard=n.renderGalleryCard.bind(n),n}return f(t,e),t.prototype.render=function(){var e=this.props,t=e.data,n=e.handleClearAllSelectedPoints;return c.createElement("div",{id:"gallery"},c.createElement("section",{className:p.galleryHeader},c.createElement("h3",null,c.createElement(a.a,{type:"picture"})," Thumbnail gallery"),t.length>0?c.createElement(o.a,{type:"primary",icon:"close",onClick:n},"Clear All"):c.createElement("h4",null,"Clicked points on the plot will appear in this section")),c.createElement(l.a,{grid:{gutter:8,xs:1,sm:2,md:4,lg:6,xl:12},dataSource:t.length>0?t:[{empty:!0}],renderItem:this.renderGalleryCard}))},t.prototype.renderGalleryCard=function(e){var t=this.props,n=t.handleDeselectPoint,r=t.handleDownloadImage,o=t.handleOpenIn3D;return c.createElement(l.a.Item,null,c.createElement(u.a,{empty:e.empty,title:e.cellID,src:e.src,pointIndex:e.pointIndex,handleDeselectPoint:n,handleOpenIn3D:o,handleDownloadImage:r}))},t}(c.Component),y={handleClearAllSelectedPoints:s.clearAllSelectedPoints,handleDeselectPoint:s.deselectPoint,handleDownloadImage:s.downloadImage,handleOpenIn3D:s.selectCellFor3DViewer};t.a=Object(i.b)(r,y)(h)},mVQi:function(e,t,n){"use strict";var r=n("GiK3"),o=n.n(r),a=n("JNDO"),l=n.n(a),c=n("HbvT"),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},s=function(e){function t(n){var r=e.call(this,n)||this;return r.makeAnnotations=r.makeAnnotations.bind(r),r.clickedAnnotation=r.clickedAnnotation.bind(r),r.state={layout:{annotations:r.makeAnnotations(),autosize:!0,hovermode:"closest",legend:c.t.legend,margin:{b:30,r:20,t:10},paper_bgcolor:c.t.backgroundColor,plot_bgcolor:c.t.backgroundColor,xaxis:t.makeAxis([0,.85],".1f",!1),xaxis2:t.makeAxis([.86,1],"f",!0),yaxis:t.makeAxis([0,.85],".1f",!1),yaxis2:t.makeAxis([.86,1],"f",!0)},showFullAnnotation:!0},r}return i(t,e),t.makeAxis=function(e,t,n){return{color:c.t.textColor,domain:e,hoverformat:t,linecolor:c.t.textColor,showgrid:!1,tickcolor:c.t.textColor,zeroline:n}},t.prototype.componentDidUpdate=function(e){e.annotations.length!==this.props.annotations.length&&this.setState({layout:u({},this.state.layout,{annotations:this.makeAnnotations()})})},t.prototype.clickedAnnotation=function(){this.setState({showFullAnnotation:!1})},t.prototype.makeAnnotations=function(){var e=this,t=this.props.annotations;return t.map(function(n,r){var o=r+1===t.length,a=o&&e.state.showFullAnnotation;return{arrowcolor:"#fff",arrowhead:6,ax:0,ay:a?-80:0,bgcolor:"#a4a2a45c",bordercolor:"#fff",borderpad:a?4:0,borderwidth:1,captureevents:!0,cellID:n.cellID,cellLine:n.cellLine,font:{color:"#ffffff",family:"tahoma, arial, verdana, sans-serif",size:11},fovID:n.fovID,pointIndex:n.pointIndex,text:a?"Cell "+n.cellID+'<br><i>click "3D" button in gallery to load in 3D</i>':"",x:n.x,y:n.y}})},t.prototype.render=function(){var e=this.props,t=e.onPointClicked,n=e.onGroupSelected,r=e.plotDataArray,a={displayModeBar:!0,displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud","toImage","resetScale2d","hoverClosestCartesian","hoverCompareCartesian","toggleSpikelines"]};return o.a.createElement(l.a,{data:r,useResizeHandler:!0,layout:this.state.layout,config:a,onClick:t,onClickAnnotation:this.clickedAnnotation,onSelected:n})},t}(o.a.Component);t.a=s},ndGJ:function(e,t,n){"use strict";var r=n("1eoa");n.d(t,"c",function(){return r.a});var o=n("M40V");n.d(t,"d",function(){return o.a});var a=n("nktv");n.d(t,"a",function(){return a.a});var l=n("Ejqr");n.d(t,"b",function(){return l.b});var c=n("CMO8");n.n(c)},nktv:function(e,t,n){"use strict";function r(e){var t=Object(c.b)(p,h),n=Object(l.a)(t),r=Object(u.b)(Object(l.c)(f));return e?Object(l.d)(r,e,n):Object(l.d)(r,n)}t.a=r;var o=n("mtWM"),a=n.n(o),l=n("2KeS"),c=n("E0Bt"),i=n("HbvT"),u=n("ndGJ"),s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l},d=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e},f={metadata:u.c.reducer,selection:u.d.reducer},p=d(u.c.logics,u.d.logics),h={baseApiUrl:i.c,httpClient:a.a}},otLN:function(e,t,n){"use strict";function r(e){return{selected3DCell:Object(s.getSelected3DCell)(e),selected3DCellCellLine:Object(s.getSelected3DCellCellLine)(e),selected3DCellFOV:Object(s.getSelected3DCellFOV)(e)}}var o=n("FC3+"),a=(n("baa2"),n("oKZP")),l=(n("YH+2"),n("WIDu")),c=n.n(l),i=n("GiK3"),u=(n.n(i),n("RH2O")),s=n("5mEf"),d=n("FB2F"),f=n("43Sq"),p=n("+hq8"),h=n("mLcw"),y=n("NThS"),g=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l},b=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e},C=n("3r/D"),v=a.a.Header,O=a.a.Footer,w=a.a.Sider,_=a.a.Content,S=function(e){function t(n){var r=e.call(this,n)||this;return r.state={defaultActiveKey:[t.panelKeys[0]],openKeys:[t.panelKeys[0]]},r.onSelectionToolUsed=r.onSelectionToolUsed.bind(r),r.onPanelClicked=r.onPanelClicked.bind(r),r}return g(t,e),t.prototype.onSelectionToolUsed=function(){this.setState({openKeys:c()(b(this.state.openKeys,[t.panelKeys[1]]))})},t.prototype.onPanelClicked=function(e){this.setState({openKeys:e})},t.prototype.render=function(){var e=this.props,n=e.selected3DCell,r=e.selected3DCellFOV,l=e.selected3DCellCellLine;return i.createElement(a.a,{className:C.container},i.createElement(v,null,i.createElement("h3",null,i.createElement(o.a,{type:"dot-chart"})," Plot"),i.createElement(y.a,null)),i.createElement(a.a,null,i.createElement(w,{className:C.colorMenu},i.createElement(f.a,{panelKeys:t.panelKeys,openKeys:this.state.openKeys,defaultActiveKey:this.state.defaultActiveKey,onPanelClicked:this.onPanelClicked})),i.createElement(_,{className:C.content},i.createElement("div",{className:C.plotView},i.createElement(p.a,{handleSelectionToolUsed:this.onSelectionToolUsed}))),i.createElement(w,null)),i.createElement(O,null,i.createElement(h.a,null)),i.createElement("div",{className:C.cellViewerContainer},i.createElement("h3",{className:C.header},i.createElement(o.a,{type:"sync"})," 3D Cell Viewer"),i.createElement(d.a,{cellId:n,fovId:r,cellLineName:l})))},t.panelKeys=["proteinNames","selections","clusters"],t}(i.Component);t.a=Object(u.b)(r,null)(S)},qA08:function(e,t,n){"use strict";var r=n("QoDT"),o=(n("JYrs"),n("FV1P")),a=(n("faxx"),n("t5Df")),l=(n("9SSc"),n("GiK3")),c=n.n(l),i=n("rfDJ"),u=function(e){return e.includeCol?c.a.createElement(o.a,{className:i.colorByRow,type:"flex",align:"middle"},c.a.createElement(r.a,{span:e.includeCol},c.a.createElement("label",{className:i.label},"Color by:"),c.a.createElement(a.a,{className:i.colorBySwitch,defaultChecked:e.defaultChecked,checkedChildren:e.checkedChildren,unCheckedChildren:e.unCheckedChildren,onChange:e.handleChange})),e.children):c.a.createElement(o.a,{className:i.colorByRow,type:"flex",align:"middle"},c.a.createElement("label",{className:i.label},e.label),c.a.createElement(a.a,{className:i.colorBySwitch,defaultChecked:e.defaultChecked,onChange:e.handleChange}))};t.a=u},qMEF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7N90"),o=(n.n(r),n("wg8Y")),a=(n.n(o),n("/Ife")),l=(n.n(a),n("GiK3")),c=(n.n(l),n("O27J")),i=(n.n(c),n("RH2O")),u=n("HbvT"),s=n("otLN"),d=n("ndGJ");Object(c.render)(l.createElement(i.a,{store:Object(d.a)()},l.createElement(s.a,null)),document.getElementById(u.b))},rfDJ:function(e,t){e.exports={"color-by-switch":"style__color-by-switch--LlTQq",colorBySwitch:"style__color-by-switch--LlTQq","color-by-row":"style__color-by-row--2738P",colorByRow:"style__color-by-row--2738P",label:"style__label--3W_cl"}},wwhR:function(e,t,n){"use strict";var r=n("2247"),o=n.n(r),a=n("GiK3"),l=n.n(a),c=n("NGSD"),i=function(e){var t=e.closeable,n=e.downloadUrls,r=e.handleCloseSelectionSet,a=e.handleDownload,i=e.downloadConfig,u=e.hideable,s=e.onBarClicked,d=e.panelData;return l.a.createElement(l.a.Fragment,null,o()(d,function(e){return l.a.createElement(c.a,{key:e.name,closeable:t,checked:e.checked,hideable:u,color:e.color,name:e.name,total:e.total,id:e.id,onBarClicked:s,handleClose:r,handleDownload:a,downloadUrls:n,downloadConfig:i})}))};t.a=i},ydF9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"getFullMetaDataArray",function(){return g}),n.d(t,"getFullCellLineDefs",function(){return m}),n.d(t,"getFileInfo",function(){return b}),n.d(t,"getMeasuredData",function(){return C}),n.d(t,"getClusterData",function(){return v}),n.d(t,"getFeatureNames",function(){return O}),n.d(t,"getProteinLabels",function(){return w}),n.d(t,"getProteinNames",function(){return _}),n.d(t,"getProteinTotals",function(){return S}),n.d(t,"getClusterNames",function(){return D});var r=n("RyI1"),o=(n.n(r),n("ktak")),a=n.n(o),l=n("2247"),c=n.n(l),i=n("M+Z9"),u=n.n(i),s=n("WIDu"),d=n.n(s),f=n("L8MQ"),p=n.n(f),h=n("bndy"),y=(n.n(h),n("HbvT")),g=function(e){return e.metadata.featureData},m=function(e){return e.metadata.cellLineDefs},b=Object(h.createSelector)([g],function(e){return c()(e,"file_info")}),C=Object(h.createSelector)([g],function(e){return c()(e,"measured_features")}),v=Object(h.createSelector)([g],function(e){return c()(e,"clusters")}),O=Object(h.createSelector)([C],function(e){return a()(e[0])}),w=Object(h.createSelector)([b],function(e){return c()(e,y.w)}),_=Object(h.createSelector)([b],function(e){return d()(c()(e,y.w)).sort(function(e,t){return t>e?-1:e>t?1:0})}),S=Object(h.createSelector)([b,_],function(e,t){var n=u()(e,function(e,n){var r=t.indexOf(n[y.w]);return e[r]?e[r]++:e[r]=1,e},{});return p()(n)}),D=Object(h.createSelector)([v],function(e){return a()(e[0])})},"zH//":function(e,t){e.exports={container:"style__container--2a80r",label:"style__label--qfuCJ","first-column":"style__first-column--3dKE9",firstColumn:"style__first-column--3dKE9"}}},["qMEF"]);