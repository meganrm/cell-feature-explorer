webpackJsonp([1],{"+hq8":function(e,t,n){"use strict";function r(e){return{annotations:b.a.selectors.getAnnotations(e),clickedPoints:b.a.selectors.getClickedScatterPoints(e),filtersToExclude:b.a.selectors.getFiltersToExclude(e),hoveredPointData:b.a.selectors.getHoveredPointData(e),mousePosition:b.a.selectors.getMousePosition(e),plotDataArray:Object(_.a)(e)}}var o=n("tjvM"),a=(n("tIHZ"),n("RyI1")),l=n.n(a),c=n("q+Dy"),i=n.n(c),u=n("2247"),s=n.n(u),d=n("GiK3"),f=(n.n(d),n("RH2O")),p=n("mVQi"),h=n("LLOI"),y=n("cBQB"),g=n("HbvT"),m=n("1eoa"),b=n("M40V"),v=n("Ejqr"),C=n("HU+u"),_=n("9fsL"),O=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),S=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},D=n("2L1U"),P=function(e){function t(t){var n=e.call(this,t)||this;return n.onPointClicked=n.onPointClicked.bind(n),n.onPlotHovered=n.onPlotHovered.bind(n),n.onGroupSelected=n.onGroupSelected.bind(n),n.onPlotUnhovered=n.onPlotUnhovered.bind(n),n.renderPopover=n.renderPopover.bind(n),n}return O(t,e),t.prototype.componentWillMount=function(){this.props.requestCellLineData()},t.prototype.onPointClicked=function(e){var t=e.points,n=this.props,r=n.clickedPoints,o=n.handleSelectPoint,a=n.handleDeselectPoint;t.forEach(function(e){e.data.name===g.D&&(i()(r,Number(e.id))?a(Number(e.id)):e.fullData.marker.opacity&&o(Number(e.id)))})},t.prototype.onPlotHovered=function(e){var t=e.points,n=e.event,r=this.props,o=r.filtersToExclude,a=r.updateMousePosition,l=r.changeHoverCellId;a({pageX:n.pageX,pageY:n.pageY}),t.forEach(function(e){e.data.name===g.D&&l(i()(o,e.fullData.name)?-1:Number(e.id))})},t.prototype.onPlotUnhovered=function(e){var t=e.relatedTarget,n=this.props.changeHoverCellId;t.className&&n(-1)},t.prototype.onGroupSelected=function(e){if(e){var t=e.points,n=this.props,r=n.handleLassoOrBoxSelect,o=n.handleSelectionToolUsed;r(Date.now().valueOf().toString(),s()(l()(t,function(e){return e.data.name===g.D}),"id")),o()}},t.prototype.renderPopover=function(){var e=this.props,t=e.hoveredPointData,n=e.galleryCollapsed;return t&&n&&d.createElement(y.a,{title:t[g.C],description:t[g.e].toString(),src:Object(v.c)(t)})},t.prototype.render=function(){var e=this.props,t=e.annotations,n=e.plotDataArray,r=e.mousePosition;if(0===n.length)return null;var a=this.renderPopover();return d.createElement(d.Fragment,null,d.createElement(o.a,S({placement:"right",content:a,visible:!!a},{id:"thumbnail-popover"}),d.createElement(h.a,{pageX:r.pageX,pageY:r.pageY})),d.createElement("div",{id:"main-plot",className:D.container,onMouseLeave:this.onPlotUnhovered},d.createElement(C.a,{axisId:g.H}),d.createElement(C.a,{axisId:g.I}),d.createElement(p.a,{plotDataArray:n,onPointClicked:this.onPointClicked,annotations:t,onGroupSelected:this.onGroupSelected,onPlotHovered:this.onPlotHovered})))},t}(d.Component),w={changeHoverCellId:b.a.actions.changeHoveredPoint,handleDeselectPoint:b.a.actions.deselectPoint,handleLassoOrBoxSelect:b.a.actions.lassoOrBoxSelectGroup,handleSelectPoint:b.a.actions.selectPoint,requestCellLineData:m.a.actions.requestCellLineData,requestFeatureData:m.a.actions.requestFeatureData,updateMousePosition:b.a.actions.changeMousePosition};t.a=Object(f.b)(r,w)(P)},"/Z8b":function(e,t,n){"use strict";var r=n("E0Bt"),o=n("wRi7"),a=n("Ejqr"),l=n("J9+0"),c=Object(r.a)({type:l.w,transform:function(e,t){var n=e.action,r=n.payload;t(Object(a.a)(o.a.toReduxActions(r)))}});t.a=[c]},"18Ff":function(e,t){e.exports={container:"style__container--25k18","back-top-inner":"style__back-top-inner--3DOPB",backTopInner:"style__back-top-inner--3DOPB"}},"1GmC":function(e,t,n){"use strict";var r=n("QoDT"),o=(n("JYrs"),n("FV1P")),a=(n("faxx"),n("IDpA")),l=(n("MIrP"),n("M+Z9")),c=n.n(l),i=n("GiK3"),u=n.n(i),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=function(e){var t=n.props.valueOptions;n.setState({inputValue:e}),n.props.onValueChange(t[e])},n.onChange=n.onChange.bind(n),n.state={inputValue:t.initIndex||0},n}return s(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props.initIndex;e.initIndex!==t&&this.setState({inputValue:t})},t.prototype.render=function(){var e=this.state.inputValue,t=this.props,n=t.disabled,l=t.label,i=t.valueOptions,s=function(e){return i[e].slice(0,2)};if(n)return null;var d={},f=c()(i,function(e,t,n){return e[n]=Math.round(Number(t)),e},d);return u.a.createElement(o.a,null,u.a.createElement(r.a,{span:6},u.a.createElement("span",null,l)),u.a.createElement(r.a,{span:14},u.a.createElement(a.a,{min:0,max:i.length-1,onChange:this.onChange,step:1,tipFormatter:s,value:"number"==typeof e?e:0,marks:f})))},t}(u.a.Component);t.a=d},"1bZs":function(e,t){e.exports={follower:"style__follower--s1v90"}},"1eoa":function(e,t,n){"use strict";var r=n("36g3"),o=n("5uKg"),a=n("afXz"),l=n("ydF9"),c=n("8hXO");t.a={actions:r,logics:o.a,reducer:a.a,selectors:l,types:c}},"2L1U":function(e,t){e.exports={container:"style__container--3YOZp"}},"36g3":function(e,t,n){"use strict";function r(e){return{payload:e,type:u.b}}function o(e){return{payload:e,type:u.c}}function a(){return{type:u.e}}function l(){return{type:u.f}}function c(){return{type:u.d}}function i(e){return{payload:e,type:u.a}}Object.defineProperty(t,"__esModule",{value:!0}),t.receiveCellLineData=r,t.receiveMetadata=o,t.requestCellLineData=a,t.requestFeatureData=l,t.requestAlbumData=c,t.receiveAlbumData=i;var u=n("LQGz")},"3r/D":function(e,t){e.exports={content:"style__content--11OH4",blur:"style__blur--1EZAJ",header:"style__header--3rm0D","selected-info":"style__selected-info--1DbKk",selectedInfo:"style__selected-info--1DbKk",label:"style__label--2AoAh","header-section":"style__header-section--1pTsF",headerSection:"style__header-section--1pTsF",sider:"style__sider--1e2a-","color-menu":"style__color-menu--1I-K5",colorMenu:"style__color-menu--1I-K5"}},"43Sq":function(e,t,n){"use strict";function r(e){return{clusteringAlgorithm:C.a.selectors.getClusteringAlgorithm(e),clusteringOptions:C.a.selectors.getClusteringRange(e),clusteringSetting:C.a.selectors.getClusteringSetting(e),colorBy:C.a.selectors.getColorBySelection(e),downloadConfig:C.a.selectors.getDownloadConfig(e),downloadUrls:Object(w.a)(e),filtersToExclude:C.a.selectors.getFiltersToExclude(e),proteinNames:v.a.selectors.getProteinNames(e),proteinPanelData:Object(w.c)(e),selectionSetsPanelData:Object(w.d)(e),showClusters:C.a.selectors.getClustersOn(e),someProteinsOff:Object(w.b)(e)}}var o=n("hK1P"),a=(n("rpBe"),n("QoDT")),l=(n("JYrs"),n("/RMs")),c=(n("Q6o6"),n("gtac")),i=(n("tDqI"),n("FV1P")),u=(n("faxx"),n("RyI1")),s=n.n(u),d=n("q+Dy"),f=n.n(d),p=n("hIkJ"),h=n.n(p),y=n("GiK3"),g=n.n(y),m=n("RH2O"),b=n("HbvT"),v=n("1eoa"),C=n("M40V"),_=n("J9+0"),O=n("wwhR"),S=n("qA08"),D=n("1GmC"),P=n("HU+u"),w=n("JTb2"),j=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l},A=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(E(arguments[t]));return e},k=n("M4gK"),x=c.c.Button,N=c.c.Group,I=l.a.Panel,B=function(e){function t(t){var n=e.call(this,t)||this;return n.onBarClicked=n.onBarClicked.bind(n),n.onColorBySwitchChanged=n.onColorBySwitchChanged.bind(n),n.onActivePanelChange=n.onActivePanelChange.bind(n),n.changeClusteringAlgorithm=n.changeClusteringAlgorithm.bind(n),n.changeClusteringNumber=n.changeClusteringNumber.bind(n),n.renderProteinPanel=n.renderProteinPanel.bind(n),n.renderSelectionPanel=n.renderSelectionPanel.bind(n),n.renderClusteringPanel=n.renderClusteringPanel.bind(n),n.allOnOff=n.allOnOff.bind(n),n.onProteinDownloadButtonClicked=n.onProteinDownloadButtonClicked.bind(n),n.onSelectionSetDownloadButtonClicked=n.onSelectionSetDownloadButtonClicked.bind(n),n}return j(t,e),t.prototype.componentDidUpdate=function(){var e=this.props,t=e.clusteringAlgorithm,n=e.handleChangeClusteringNumber,r=e.clusteringSetting,o=e.clusteringOptions;r||n(Object(_.h)(t),o[2])},t.prototype.onBarClicked=function(e){var t=e.target,n=this.props,r=n.handleFilterByProteinName,o=n.filtersToExclude;r(f()(o,t.value)?s()(o,function(e){return e!==t.value}):A(o,[t.value]))},t.prototype.onProteinDownloadButtonClicked=function(e){(0,this.props.handleChangeDownloadSettings)({key:e,type:b.o})},t.prototype.onSelectionSetDownloadButtonClicked=function(e){(0,this.props.handleChangeDownloadSettings)({key:e,type:b.p})},t.prototype.allOnOff=function(e){var t=e.target,n=this.props,r=n.handleFilterByProteinName,o=n.proteinNames;if(t.checked)return r([]);r(o)},t.prototype.onColorBySwitchChanged=function(e){var t=this.props.handleChangeAxis;if(e)return t(b.m,b.C);t(b.m,"Nuclear Volume (fL)")},t.prototype.onActivePanelChange=function(e){(0,this.props.onPanelClicked)(e)},t.prototype.changeClusteringAlgorithm=function(e){var t=e.target;(0,this.props.handleChangeClusteringAlgorithm)(t.value)},t.prototype.changeClusteringNumber=function(e){var t=this.props,n=t.handleChangeClusteringNumber,r=t.clusteringAlgorithm;n(Object(_.h)(r),e)},t.prototype.renderClusteringPanel=function(){var e=this.props,t=e.clusteringAlgorithm,n=e.clusteringSetting,r=e.handleClusteringToggle,o=e.clusteringOptions,a=e.showClusters,l=h()(o,n)||2;return g.a.createElement(g.a.Fragment,null,g.a.createElement(S.a,{defaultChecked:!1,handleChange:r,label:"Show clusters:"}),g.a.createElement(i.a,{className:k.colorByRow,type:"flex",align:"middle"},g.a.createElement(N,{onChange:this.changeClusteringAlgorithm,defaultValue:b.t,disabled:!a},g.a.createElement(x,{value:b.t},"KMeans"),g.a.createElement(x,{value:b.a},"Agglomerative"),g.a.createElement(x,{value:b.F},"Spectral"))),g.a.createElement(D.a,{disabled:!a,label:_.g[Object(_.h)(t)],onValueChange:this.changeClusteringNumber,valueOptions:o,initIndex:l}))},t.prototype.renderSelectionPanel=function(){var e=this.props,t=e.downloadUrls,n=e.downloadConfig,r=e.handleApplyColorSwitchChange,o=e.selectionSetsPanelData,a=e.handleCloseSelectionSet;return 0===o.length?g.a.createElement("span",null,"No selected sets yet. Make a selection on the plot using the",g.a.createElement("strong",null," Lasso Select")," or",g.a.createElement("strong",null," Box Select")," tools on the plot, and it will get saved here."):g.a.createElement(g.a.Fragment,null,g.a.createElement(S.a,{defaultChecked:!0,handleChange:r,label:"Show selections: "}),g.a.createElement("div",null,g.a.createElement(O.a,{closeable:!0,hideable:!1,handleCloseSelectionSet:a,panelData:o,downloadUrls:t,downloadConfig:n,handleDownload:this.onSelectionSetDownloadButtonClicked})))},t.prototype.renderProteinPanel=function(){var e=this.props,t=e.filtersToExclude,n=e.someProteinsOff,r=e.proteinPanelData,l=e.downloadUrls,c=e.downloadConfig;return g.a.createElement(g.a.Fragment,null,g.a.createElement(i.a,{className:k.colorByRow},g.a.createElement(a.a,{span:6},"Color by:"),g.a.createElement(a.a,{span:18},g.a.createElement(P.a,{axisId:b.m}))),g.a.createElement("div",null,g.a.createElement("div",{className:k.barChartHeader},g.a.createElement(o.a,{indeterminate:n,checked:0===t.length,onChange:this.allOnOff},"Show/Hide all"),g.a.createElement("span",{className:k.label},"# of cells")),g.a.createElement(O.a,{closeable:!1,panelData:r,downloadUrls:l,downloadConfig:c,hideable:!0,onBarClicked:this.onBarClicked,handleDownload:this.onProteinDownloadButtonClicked})))},t.prototype.render=function(){var e=this.props,t=e.defaultActiveKey,n=e.openKeys,r=e.panelKeys;return g.a.createElement(l.a,{defaultActiveKey:t,activeKey:n,onChange:this.onActivePanelChange},g.a.createElement(I,{key:r[0],header:"Data grouped by tagged structures"},this.renderProteinPanel()),g.a.createElement(I,{key:r[1],header:"Selected sets"},this.renderSelectionPanel()),g.a.createElement(I,{key:r[2],header:"Data group by clustering"},this.renderClusteringPanel()))},t}(g.a.Component),M={handleApplyColorSwitchChange:C.a.actions.toggleApplySelectionSetColors,handleChangeAxis:C.a.actions.changeAxis,handleChangeClusteringAlgorithm:C.a.actions.changeClusteringAlgorithm,handleChangeClusteringNumber:C.a.actions.changeClusteringNumber,handleChangeDownloadSettings:C.a.actions.changeDownloadSettings,handleCloseSelectionSet:C.a.actions.deselectGroupOfPoints,handleClusteringToggle:C.a.actions.toggleShowClusters,handleFilterByProteinName:C.a.actions.toggleFilterByProteinName};t.a=Object(m.b)(r,M)(B)},"4nqc":function(e,t,n){"use strict";var r,o,a,l,c=n("Rhpv"),i=n.n(c),u=n("q+Dy"),s=n.n(u),d=n("DEG1"),f=n.n(d),p=n("lHK6"),h=n.n(p),y=n("GDZS"),g=n.n(y),m=n("q16o"),b=n.n(m),v=n("JDN0"),C=n.n(v),_=n("2247"),O=n.n(_),S=n("zMR/"),D=n.n(S),P=n("M+Z9"),w=n.n(P),j=n("HbvT"),E=n("98+/"),A=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},k=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l},x=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(k(arguments[t]));return e};!function(e){e.cellSelectedFor3D="cellSelectedFor3D",e.colorBy="colorBy",e.plotByOnX="plotByOnX",e.plotByOnY="plotByOnY",e.selectedPoint="selectedPoint",e.selectedAlbum="selectedAlbum",e.galleryCollapsed="galleryCollapsed"}(l||(l={}));var N=function(){function e(){}return e.toAppState=function(t){var n={};return w()(t,function(n,r,o){if(e.urlParamToStateMap.hasOwnProperty(o)){var a=e.urlParamToStateMap[o](r,t);return D()({},n,a,function(e,t){if(Array.isArray(e))return e.concat(t)})}return n},n)},e.toReduxActions=function(t){var n=[];return w()(t,function(n,r,o){if(e.urlParamToActionCreatorMap.hasOwnProperty(o)){var a=e.urlParamToActionCreatorMap[o](r,t);if(a)return x(n,i()(a))}return n},n)},e.toUrlSearchParameterMap=function(t){var n=this,r={};return w()(t,function(t,r,o){return e.stateToUrlParamMap.hasOwnProperty(o)&&e.valueIsMeaningfulToSerialize(r)?A({},t,n.stateToUrlParamMap[o](r)):t},r)},e.valueIsMeaningfulToSerialize=function(e){return!!f()(e)||(Array.isArray(e)||C()(e)?!h()(e):!g()(e)&&!b()(e))},e.urlParamToActionCreatorMap=(r={},r[l.cellSelectedFor3D]=function(e,t){var n=Object(E.selectCellFor3DViewer)(Number(e));return s()(i()(t[l.selectedPoint]),e)?n:[Object(E.selectPoint)(Number(e)),n]},r[l.colorBy]=function(e){return Object(E.changeAxis)(j.m,String(e))},r[l.galleryCollapsed]=function(e){return Object(E.toggleGallery)("true"===e)},r[l.plotByOnX]=function(e){return Object(E.changeAxis)(j.H,String(e))},r[l.plotByOnY]=function(e){return Object(E.changeAxis)(j.I,String(e))},r[l.selectedAlbum]=function(e){return Object(E.selectAlbum)(Number(e))},r[l.selectedPoint]=function(e){return Array.isArray(e)?O()(e,function(e){return Object(E.selectPoint)(Number(e))}):Object(E.selectPoint)(Number(e))},r),e.urlParamToStateMap=(o={},o[l.cellSelectedFor3D]=function(e,t){var n={cellSelectedFor3D:Number(e)};return s()(i()(t[l.selectedPoint]),e)||Object.assign(n,{selectedPoints:[Number(e)]}),n},o[l.colorBy]=function(e){var t;return t={},t[j.m]=String(e),t},o[l.galleryCollapsed]=function(e){return{galleryCollapsed:"true"===e}},o[l.plotByOnX]=function(e){var t;return t={},t[j.H]=String(e),t},o[l.plotByOnY]=function(e){var t;return t={},t[j.I]=String(e),t},o[l.selectedAlbum]=function(e){return{selectedAlbum:Number(e)}},o[l.selectedPoint]=function(e){return{selectedPoints:O()(i()(e),Number)}},o),e.stateToUrlParamMap=(a={cellSelectedFor3D:function(e){var t;return t={},t[l.cellSelectedFor3D]=String(e),t}},a[j.m]=function(e){var t;return t={},t[l.colorBy]=String(e),t},a.galleryCollapsed=function(e){var t;return t={},t[l.galleryCollapsed]=String(e),t},a.selectedAlbum=function(e){var t;return t={},t[l.selectedAlbum]=String(e),t},a.selectedPoints=function(e){var t;return t={},t[l.selectedPoint]=O()(i()(e),String),t},a[j.H]=function(e){var t;return t={},t[l.plotByOnX]=String(e),t},a[j.I]=function(e){var t;return t={},t[l.plotByOnY]=String(e),t},a),e}();t.a=N},"5mEf":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"getPlotByOnX",function(){return j}),n.d(t,"getPlotByOnY",function(){return E}),n.d(t,"getClickedScatterPoints",function(){return A}),n.d(t,"getSelectedGroups",function(){return k}),n.d(t,"getColorBySelection",function(){return x}),n.d(t,"getProteinColors",function(){return N}),n.d(t,"getSelectionSetColors",function(){return I}),n.d(t,"getFiltersToExclude",function(){return B}),n.d(t,"getSelected3DCell",function(){return M}),n.d(t,"getApplyColorToSelections",function(){return F}),n.d(t,"getClustersOn",function(){return G}),n.d(t,"getClusteringAlgorithm",function(){return H}),n.d(t,"getNumberOfClusters",function(){return T}),n.d(t,"getClusteringDistance",function(){return V}),n.d(t,"getDownloadConfig",function(){return L}),n.d(t,"getMousePosition",function(){return K}),n.d(t,"getHoveredPointId",function(){return q}),n.d(t,"getHoveredCardId",function(){return U}),n.d(t,"getSelectedAlbum",function(){return R}),n.d(t,"getGalleryCollapsed",function(){return z}),n.d(t,"getFilteredData",function(){return J}),n.d(t,"getFilteredMeasuredData",function(){return X}),n.d(t,"getFilteredFileInfo",function(){return Y}),n.d(t,"getXValues",function(){return Z}),n.d(t,"getYValues",function(){return Q}),n.d(t,"getIds",function(){return W}),n.d(t,"getPossibleColorByData",function(){return $}),n.d(t,"getFilteredOpacity",function(){return ee}),n.d(t,"getOpacity",function(){return te}),n.d(t,"getColorByValues",function(){return ne}),n.d(t,"getHoveredPointData",function(){return re}),n.d(t,"getAnnotations",function(){return ae}),n.d(t,"getSelected3DCellFileInfo",function(){return le}),n.d(t,"getSelected3DCellFOV",function(){return ce}),n.d(t,"getSelected3DCellCellLine",function(){return ie}),n.d(t,"getSelected3DCellLabeledProtein",function(){return ue}),n.d(t,"getSelected3DCellLabeledStructure",function(){return se}),n.d(t,"getSelectedGroupsData",function(){return de}),n.d(t,"getSelectedGroupKeys",function(){return fe}),n.d(t,"getSelectedSetTotals",function(){return pe}),n.d(t,"getClusteringRange",function(){return he}),n.d(t,"getFilteredClusteringData",function(){return ye}),n.d(t,"getClusteringSetting",function(){return ge}),n.d(t,"getClusteringResult",function(){return me});var r=n("RyI1"),o=n.n(r),a=n("kbi+"),l=n.n(a),c=n("KgVm"),i=n.n(c),u=n("q+Dy"),s=n.n(u),d=n("ktak"),f=n.n(d),p=n("2247"),h=n.n(p),y=n("94Kh"),g=n.n(y),m=n("M+Z9"),b=n.n(m),v=n("bndy"),C=(n.n(v),n("HbvT")),_=n("ydF9"),O=n("Ejqr"),S=n("J9+0"),D=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},P=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l},w=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(P(arguments[t]));return e},j=function(e){return e.selection.plotByOnX},E=function(e){return e.selection.plotByOnY},A=function(e){return e.selection.selectedPoints},k=function(e){return e.selection.selectedGroups},x=function(e){return e.selection.colorBy},N=function(e){return e.selection.proteinColors},I=function(e){return e.selection.selectedGroupColors},B=function(e){return e.selection.filterExclude},M=function(e){return e.selection.cellSelectedFor3D},F=function(e){return e.selection.applySelectionSetColoring},G=function(e){return e.selection.showClusters},H=function(e){return e.selection.clusteringAlgorithm},T=function(e){return e.selection.numberOfClusters},V=function(e){return e.selection.clusteringDistance},L=function(e){return e.selection.downloadConfig},K=function(e){return e.selection.mousePosition},q=function(e){return e.selection.hoveredPointId},U=function(e){return e.selection.hoveredCardId},R=function(e){return e.selection.selectedAlbum},z=function(e){return e.selection.galleryCollapsed},J=Object(v.createSelector)([B,_.getFullMetaDataArray],function(e,t){return e.length?o()(t,function(t){return!s()(e,t.file_info[C.C])}):t}),X=Object(v.createSelector)([J],function(e){return h()(e,"measured_features")}),Y=Object(v.createSelector)([J],function(e){return h()(e,"file_info")}),Z=Object(v.createSelector)([X,j],function(e,t){return h()(e,function(e){return e[t]})}),Q=Object(v.createSelector)([X,E],function(e,t){return e.map(function(e){return e[t]})}),W=Object(v.createSelector)([Y],function(e){return h()(e,function(e){return e[C.e].toString()})}),$=Object(v.createSelector)([J],function(e){return h()(e,function(e){var t;return D({},e.measured_features,(t={},t[C.C]=e.file_info[C.C],t))})}),ee=Object(v.createSelector)([x,B,_.getProteinLabels],function(e,t,n){return h()(n,function(e){return s()(t,e)?0:C.s.unselectedCircleOpacity})}),te=Object(v.createSelector)([x,B,_.getProteinNames,_.getProteinLabels],function(e,t,n,r){var o;return o=e===C.C?n:r,h()(o,function(e){return s()(t,e)?0:C.s.unselectedCircleOpacity})}),ne=Object(v.createSelector)([$,x],function(e,t){return h()(e,t)}),re=Object(v.createSelector)([q,_.getFileInfo],function(e,t){var n;return l()(t,(n={},n[C.e]=e,n))}),oe=Object(v.createSelector)([_.getFileInfo,A],function(e,t){var n=new Set(h()(e,C.e));return o()(t,function(e){return n.has(e)})}),ae=Object(v.createSelector)([_.getMeasuredData,_.getFileInfo,oe,j,E,U],function(e,t,n,r,o,a){return n.map(function(n){var l=i()(t,function(e){return Number(e[C.e])===Number(n)}),c=t[l][C.r],u=t[l][C.i],s=e[l][r],d=e[l][o];return{cellID:n,cellLine:u,fovID:c,hovered:n===a,pointIndex:l,x:s,y:d}})}),le=Object(v.createSelector)([M,_.getFileInfo],function(e,t){return Object(O.e)(t,e)}),ce=Object(v.createSelector)([le],function(e){return e?e[C.r]:""}),ie=Object(v.createSelector)([le],function(e){return e?e[C.i]:""}),ue=Object(v.createSelector)([le],function(e){return e?e[C.C]:""}),se=Object(v.createSelector)([_.getFullCellLineDefs,ie],function(e,t){return e[t]?e[t][C.h]:""}),de=Object(v.createSelector)([_.getFullMetaDataArray,k,j,E,I],function(e,t,n,r,o){var a=g()(t,function(t,a){return h()(t,function(t){var c=l()(e,function(e){return Number(e.file_info[C.e])===Number(t)});return{groupColor:o[a],x:c.measured_features[n],y:c.measured_features[r]}})}),c=b()(a,function(e,t){return w(e,t)},[]);return{color:h()(c,"groupColor"),x:h()(c,"x"),y:h()(c,"y")}}),fe=Object(v.createSelector)([k],function(e){return f()(e)}),pe=Object(v.createSelector)([k],function(e){return h()(e,function(e){return e.length})}),he=Object(v.createSelector)([_.getClusterData,H],function(e,t){return e[0]?f()(e[0][t]):[]}),ye=Object(v.createSelector)([J],function(e){return h()(e,"clusters")}),ge=Object(v.createSelector)([H,V,T],function(e,t,n){return Object(S.h)(e)===C.k?t:n}),me=Object(v.createSelector)([ye,H,ge,Z,Q,ee],function(e,t,n,r,o,a){return{color:h()(e,function(e){return e[t][n]}),opacity:a,x:r,y:o}})},"5uKg":function(e,t,n){"use strict";var r=n("lHK6"),o=n.n(r),a=n("ktak"),l=n.n(a),c=n("2247"),i=n.n(c),u=n("M+Z9"),s=n.n(u),d=n("yG5q"),f=n.n(d),p=n("E0Bt"),h=n("HbvT"),y=n("98+/"),g=n("J9+0"),m=n("5mEf"),b=n("Ejqr"),v=n("36g3"),C=n("LQGz"),_=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},O=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l},S=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(O(arguments[t]));return e},D=Object(p.a)({process:function(e,t,n){var r=e.baseApiUrl;return e.httpClient.get(r+"/cell-line-def.json").then(function(e){return e.data}).then(function(e){return s()(e,function(e,t){var n;return e[t[h.f]]=(n={},n[h.h]=t[h.h],n[h.g]=t[h.g],n),e},{})}).then(function(e){return t(Object(v.receiveCellLineData)(e))}).then(function(){return t(Object(v.requestFeatureData)())}).catch(function(e){console.log(e)}).then(function(){return n()})},type:C.e}),P=Object(p.a)({process:function(e,t,n){var r=e.baseApiUrl,a=e.getState;return e.httpClient.get(r+"/cell-feature-analysis.json").then(function(e){return e.data}).then(function(e){var t=a().metadata.cellLineDefs;return f()(i()(e,function(e){var n;return{clusters:e.clusters,file_info:_({},e.file_info,(n={},n[h.C]=t[e.file_info[h.i]][h.g],n)),measured_features:e.measured_features}}))}).then(function(e){var n=i()(e[0].clusters,function(e,t){var n=l()(e)[Math.floor(l()(e).length/2)];return Object(y.changeClusteringNumber)(Object(g.h)(t),n)});return t(Object(b.a)(S(n,[Object(v.receiveMetadata)(e)]))),e[0]}).then(function(e){var n=a(),r=[];o()(Object(m.getClickedScatterPoints)(n))&&r.push(Object(y.selectPoint)(Number(e.file_info[h.e]))),Object(m.getSelected3DCell)(n)||r.push(Object(y.selectCellFor3DViewer)(e.file_info[h.e])),o()(r)||t(Object(b.a)(r))}).catch(function(e){console.log(e)}).then(function(){return n()})},type:C.f}),w=Object(p.a)({process:function(e){var t=e.baseApiUrl;return e.httpClient.get(t+"/albums.json").then(function(e){return e.data}).catch(function(e){console.log(e)})},processOptions:{successType:C.a},type:C.d});t.a=[w,D,P]},"8hXO":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("HbvT")},"98+/":function(e,t,n){"use strict";function r(e,t){return{axisId:e,payload:t,type:O.a}}function o(e,t){return{key:e,payload:t,type:O.s}}function a(e){return{payload:e,type:O.j}}function l(e){return{payload:e,type:O.k}}function c(e){return{payload:e,type:O.t}}function i(){return{type:O.i}}function u(e){return{payload:e,type:O.z}}function s(e){return{payload:e,type:O.r}}function d(e){return{payload:e,type:O.w}}function f(e){return{payload:e,type:O.x}}function p(e){return{payload:e,type:O.b}}function h(e,t){return{clusteringKey:e,payload:t,type:O.c}}function y(e){return{payload:e,type:O.y}}function g(e){return{payload:e,type:O.u}}function m(e){return{payload:e,type:O.v}}function b(e){return{payload:e,type:O.e}}function v(e){return{payload:e,type:O.d}}function C(e){return{payload:e,type:O.f}}function _(e){return{payload:e,type:O.A}}Object.defineProperty(t,"__esModule",{value:!0}),t.changeAxis=r,t.lassoOrBoxSelectGroup=o,t.deselectGroupOfPoints=a,t.deselectPoint=l,t.selectPoint=c,t.clearAllSelectedPoints=i,t.toggleFilterByProteinName=u,t.selectCellFor3DViewer=s,t.syncStateWithURL=d,t.toggleApplySelectionSetColors=f,t.changeClusteringAlgorithm=p,t.changeClusteringNumber=h,t.toggleShowClusters=y,t.changeDownloadSettings=g,t.changeMousePosition=m,t.changeHoveredPoint=b,t.setHoveredGalleryCard=v,t.selectAlbum=C,t.toggleGallery=_;var O=n("J9+0")},"9fsL":function(e,t,n){"use strict";function r(e){return!0===e.groupBy}function o(e,t){return r(t)?h({},e,{transforms:[{groups:t.groups,nameformat:"%{group}",styles:u()(t.groupSettings,function(e,t){return{target:e.name,value:{marker:{color:e.color,opacity:d.s.unselectedCircleOpacity}}}}),type:"groupby"}]}):h({},e,{marker:h({},e.marker,{color:t.color,opacity:t.opacity||d.s.unselectedCircleOpacity})})}function a(e){return o({hoverinfo:"none",ids:e.ids,marker:{size:d.s.circleRadius,symbol:"circle"},mode:"markers",name:e.plotName,showlegend:!1,type:"scattergl",x:e.x,y:e.y,z:[]},e)}function l(e){return{marker:{color:d.s.histogramColor,line:{color:d.s.textColor,width:1}},name:"x histogram",nbinsx:60,showlegend:!1,type:"histogram",x:e,yaxis:"y2"}}function c(e){return{marker:{color:d.s.histogramColor,line:{color:d.s.textColor,width:1}},name:"y histogram",nbinsy:60,showlegend:!1,type:"histogram",xaxis:"x2",y:e}}n.d(t,"a",function(){return b});var i=n("2247"),u=n.n(i),s=n("bndy"),d=(n.n(s),n("HbvT")),f=n("ydF9"),p=n("5mEf"),h=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},y=function(e,t,n){return e===d.C?u()(t,function(e,t){return{color:n[t],name:e}}):e===d.v?u()(d.u,function(e,t){return{color:e,name:t}}):null},g=Object(s.createSelector)([p.getXValues,p.getYValues,p.getIds,p.getFilteredFileInfo,p.getColorByValues,p.getColorBySelection,p.getProteinColors,f.getProteinNames],function(e,t,n,r,o,a,l,c){return{color:a===d.C?null:o,groupBy:a===d.C||a===d.v,groupSettings:y(a,c,l),groups:o,ids:n,x:e,y:t}}),m=Object(s.createSelector)([g,p.getApplyColorToSelections,p.getClustersOn,p.getSelectedGroupsData,p.getClusteringResult],function(e,t,n,o,a){var l=h({},e,{groupSettings:r(e)?h({},e.groupSettings):null,plotName:d.D}),c=t?h({},o,{groupBy:!1,plotName:d.E}):null;return{clusteringPlotData:n?h({},a,{groupBy:!1,plotName:d.j}):null,mainPlotData:l,selectedGroupPlotData:c}}),b=Object(s.createSelector)([m],function(e){var t=e.mainPlotData,n=e.selectedGroupPlotData,r=e.clusteringPlotData,o=[l(t.x),c(t.y),a(t)];return r&&o.push(a(r)),n&&o.push(a(n)),o})},Aosa:function(e,t){e.exports={container:"style__container--MWnN3"}},CMO8:function(e,t){},CXUS:function(e,t){e.exports={"cell-viewer":"style__cell-viewer--2yy3F",cellViewer:"style__cell-viewer--2yy3F"}},Cwrf:function(e,t){e.exports={"plot-by-on-x":"style__plot-by-on-x--2opAx",plotByOnX:"style__plot-by-on-x--2opAx","plot-by-on-y":"style__plot-by-on-y--2d4YU",plotByOnY:"style__plot-by-on-y--2d4YU"}},Ejqr:function(e,t,n){"use strict";function r(e,t){return p.b+"/"+e.toUpperCase()+"/"+t.toUpperCase()}function o(e,t){return function(n,r){void 0===n&&(n=t);var o=e[r.type];return o&&o.accepts(r)?o.perform(n,r):n}}function a(e,t){return void 0===t&&(t=h),{type:t,batch:!0,payload:e}}function l(e){return e&&e.batch&&Array.isArray(e.payload)}function c(e,t){return function n(r,o){return void 0===r&&(r=t),l(o)?o.payload.reduce(n,r):e(r,o)}}function i(e,t){return f()(e,function(e){return Number(e[p.e])===Number(t)})}function u(e){return"C"+e[p.e]}function s(e){return"/"+e[p.i]+"/"+e[p.i]+"_"+e[p.r]+"_"+e[p.e]+".png"}t.f=r,t.g=o,t.a=a,t.d=c,t.e=i,t.b=u,t.c=s;var d=n("kbi+"),f=n.n(d),p=n("HbvT"),h=r("batch","batch-actions")},EsV9:function(e,t,n){"use strict";var r=n("zwGx"),o=(n("crfj"),n("jf3V")),a=(n("7WgF"),n("FC3+")),l=(n("baa2"),n("aOwA")),c=(n("Qbm7"),n("q+Dy")),i=n.n(c),u=n("WIDu"),s=n.n(u),d=n("GiK3"),f=n.n(d),p=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},y=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l},g=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e},m=n("WeNn"),b="alreadyDownloaded",v=function(e){function t(t){var n=e.call(this,t)||this;return n.onClose=n.onClose.bind(n),n.onDownload=n.onDownload.bind(n),n.saveDownloadUrl=n.saveDownloadUrl.bind(n),n.handleMenuClick=n.handleMenuClick.bind(n),n.handleDownloadMenuVisibleChange=n.handleDownloadMenuVisibleChange.bind(n),n.state={alreadyDownloaded:localStorage.getItem(b)?JSON.parse(localStorage.getItem(b)):{},downloadMenuVisible:!1},n}return p(t,e),t.prototype.onClose=function(e){var t=e.currentTarget,n=this.props.handleClose;t&&t.id&&n&&n(t.id)},t.prototype.onDownload=function(e){var t=e.currentTarget,n=this.props.handleDownload;t&&t.id&&n&&n(t.id)},t.prototype.saveDownloadUrl=function(e){var t,n,r=this.props.downloadConfig,o=this.state.alreadyDownloaded,a=o[r.key];a?this.setState({alreadyDownloaded:h({},o,(t={},t[r.key]=s()(g(a,[e.key])),t))}):this.setState({alreadyDownloaded:h({},o,(n={},n[r.key]=[e.key],n))})},t.prototype.handleDownloadMenuVisibleChange=function(e){localStorage.setItem(b,JSON.stringify(this.state.alreadyDownloaded)),this.setState({downloadMenuVisible:!!e})},t.prototype.handleMenuClick=function(){var e=this.props,t=e.downloadUrls,n=e.downloadConfig,r=this.state.alreadyDownloaded[n.key];r&&r.length===t.length&&this.setState({downloadMenuVisible:!1})},t.prototype.render=function(){var e=this,t=this.props,n=t.id,c=t.downloadUrls,u=t.downloadConfig,s=this.state.alreadyDownloaded[u.key],d=f.a.createElement(l.a,{className:m.menu,onClick:this.handleMenuClick},c.map(function(t,n){return f.a.createElement(l.a.Item,{key:n,onClick:e.saveDownloadUrl},i()(s,n.toString())?f.a.createElement(a.a,{type:"check"}):f.a.createElement(a.a,{type:"download"}),f.a.createElement("a",{href:t}," data chunk ",n+1," "))}));return f.a.createElement("div",{className:m.container},f.a.createElement(o.a,{overlay:d,trigger:["click"],onVisibleChange:this.handleDownloadMenuVisibleChange,visible:this.state.downloadMenuVisible},f.a.createElement(r.a,{size:"small",className:"ant-dropdown-link",id:n,onClick:this.onDownload},f.a.createElement(a.a,{type:"download"}))))},t.defaultProps={closeable:!1,downloadUrls:[],hideable:!0},t}(f.a.Component);t.a=v},FB2F:function(e,t,n){"use strict";var r=n("yaF+"),o=(n.n(r),n("q+Dy")),a=n.n(o),l=n("GiK3"),c=n.n(l),i=n("HbvT"),u=n("CXUS"),s=function(e){var t=e.cellId,n=e.cellLineName,o=e.fovId;if(!t||!n)return null;var l=function(e){return a()(i.z,e)?i.z[0]:a()(i.A,e)?i.A[0]:a()(i.y,e)?i.y[0]:a()(i.d,e)?i.d[0]:e};return c.a.createElement("div",{className:u.cellViewer},c.a.createElement(r.ImageViewerApp,{cellId:t,baseUrl:""+i.G,cellPath:n+"/"+n+"_"+o+"_"+t,fovPath:n+"/"+n+"_"+o,defaultVolumesOn:[0,1,2],defaultSurfacesOn:[],channelNameClean:l,appHeight:"75vh"}))};t.a=s},"HU+u":function(e,t,n){"use strict";function r(e){return{colorByValue:Object(p.getColorBySelection)(e),featureNames:Object(d.getFeatureNames)(e),xDropDownValue:Object(p.getPlotByOnX)(e),yDropDownValue:Object(p.getPlotByOnY)(e)}}var o=n("8/ER"),a=(n("cwkc"),n("q+Dy")),l=n.n(a),c=n("GiK3"),i=n.n(c),u=n("RH2O"),s=n("HbvT"),d=n("ydF9"),f=n("98+/"),p=n("5mEf"),h=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l},g=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e},m=n("Cwrf"),b=o.a.Option,v=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChange=n.handleChange.bind(n),n}return h(t,e),t.prototype.handleChange=function(e){var t=this.props,n=t.axisId;(0,t.handleChangeAxis)(n,e)},t.prototype.render=function(){var e,t,n=this.props,r=n.axisId,a=n.colorByValue,c=n.xDropDownValue,u=n.yDropDownValue,d=n.featureNames,f=(e={},e[s.H]=c,e[s.I]=u,e[s.m]=a,e);return t=r!==s.m||l()(d,s.C)?d:g([s.C],d),i.a.createElement("div",{className:m[r]},i.a.createElement(o.a,{onChange:this.handleChange,value:f[r]},t.map(function(e){return i.a.createElement(b,{value:e,key:e},e===s.C?"Protein":e)})))},t}(i.a.Component),C={handleChangeAxis:f.changeAxis};t.a=Object(u.b)(r,C)(v)},HbvT:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"H",function(){return l}),n.d(t,"I",function(){return c}),n.d(t,"D",function(){return i}),n.d(t,"E",function(){return u}),n.d(t,"j",function(){return s}),n.d(t,"m",function(){return d}),n.d(t,"e",function(){return f}),n.d(t,"i",function(){return p}),n.d(t,"r",function(){return h}),n.d(t,"C",function(){return y}),n.d(t,"f",function(){return g}),n.d(t,"h",function(){return m}),n.d(t,"g",function(){return b}),n.d(t,"o",function(){return v}),n.d(t,"p",function(){return C}),n.d(t,"v",function(){return _}),n.d(t,"w",function(){return o}),n.d(t,"u",function(){return O}),n.d(t,"a",function(){return S}),n.d(t,"t",function(){return D}),n.d(t,"F",function(){return P}),n.d(t,"l",function(){return w}),n.d(t,"k",function(){return j}),n.d(t,"c",function(){return E}),n.d(t,"G",function(){return A}),n.d(t,"q",function(){return k}),n.d(t,"x",function(){return x}),n.d(t,"n",function(){return N}),n.d(t,"B",function(){return I}),n.d(t,"s",function(){return B}),n.d(t,"d",function(){return M}),n.d(t,"z",function(){return F}),n.d(t,"A",function(){return G}),n.d(t,"y",function(){return H});var r,o,a="cell-feature-explorer",l="plotByOnX",c="plotByOnY",i="features-scatter-plot",u="selections-scatter-plot",s="clusters-plot-name",d="colorBy",f="CellId",p="CellLineName",h="FOVId",y="structureProteinName",g="CellLineId/Name",m="StructureId/Name",b="ProteinId/DisplayName",v=(Object.freeze([f,p,h]),"protein"),C="selectionSet",_="Interphase and Mitotic Stages (stage)";!function(e){e[e.Interphase=0]="Interphase",e[e.Prophase=1]="Prophase",e[e.Prometaphase=2]="Prometaphase",e[e.Metaphase=3]="Metaphase",e[e.Anaphase=4]="Anaphase"}(o||(o={}));var O=(r={},r[o.Anaphase]="#c51b8a",r[o.Metaphase]="#43a2ca",r[o.Prometaphase]="#66c2a4",r[o.Prophase]="#fed98e",r[o.Interphase]="#838383",r),S="Agglomerative",D="KMeans",P="Spectral",w="numberOfClusters",j="clusteringDistance",E="https://raw.githubusercontent.com/AllenInstitute/cell-feature-data/master/",A="https://s3-us-west-2.amazonaws.com/bisque.allencell.org/v1.3.0/Cell-Viewer_Thumbnails",k="https://files.allencell.org/api/2.0/file/download?collection=cellviewer-1-3",x=0,N="#6e6e6e",I="#000",B={backgroundColor:"rgba(0,0,0,0)",cellName:f,chartParent:"ace-scatter-chart",circleRadius:4,histogramColor:"rgb(164,162,164)",legend:{font:{color:"rgb(255,255,255)"},orientation:"h",y:60},margin:{bottom:10,left:25,right:25,top:10},moveDropdownCutoffWidth:370,plotHeight:580,showLegendCutoffHeight:635,showLegendCutoffWidth:692,textColor:"rgb(255,255,255)",unselectedCircleOpacity:.5,xAxisInitial:"Nuclear Volume (fL)",yAxisInitial:"Cellular Volume (fL)"},M=["Bright_100","Bright_100X","TL 100x"],F=["CMDRP"],G=["EGFP","mtagRFPT"],H=["H3342_3","H3342"]},HtOV:function(e,t){e.exports={container:"style__container--1umfk",infoList:"style__infoList--3CWMz",actionList:"style__actionList---A349",title:"style__title--2aWxh",disabled:"style__disabled--34aP_",selected:"style__selected--2XrhK",stage:"style__stage--3kByj"}},"J9+0":function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"s",function(){return c}),n.d(t,"k",function(){return i}),n.d(t,"t",function(){return u}),n.d(t,"i",function(){return s}),n.d(t,"z",function(){return d}),n.d(t,"r",function(){return f}),n.d(t,"x",function(){return p}),n.d(t,"j",function(){return h}),n.d(t,"c",function(){return y}),n.d(t,"b",function(){return g}),n.d(t,"y",function(){return m}),n.d(t,"u",function(){return b}),n.d(t,"v",function(){return v}),n.d(t,"w",function(){return C}),n.d(t,"e",function(){return _}),n.d(t,"d",function(){return O}),n.d(t,"f",function(){return S}),n.d(t,"A",function(){return D}),n.d(t,"m",function(){return P}),n.d(t,"n",function(){return w}),n.d(t,"o",function(){return j}),n.d(t,"p",function(){return E}),n.d(t,"l",function(){return A}),n.d(t,"q",function(){return k}),n.d(t,"h",function(){return x}),n.d(t,"g",function(){return N});var r,o=n("HbvT"),a=n("Ejqr"),l=Object(a.f)("selection","deselect-file"),c=Object(a.f)("selection","select_group"),i=Object(a.f)("selection","deselect-point"),u=Object(a.f)("selection","select-point"),s=Object(a.f)("selection","deselect-all-points"),d=Object(a.f)("selection","toggle-filter-by-protein-name"),f=Object(a.f)("selection","open-cell-in-3d"),p=Object(a.f)("selection","apply-selection-set-color"),h=Object(a.f)("selection","deselect-group"),y=Object(a.f)("selection","change-cluster-number"),g=Object(a.f)("selection","change-clustering-algorithm"),m=Object(a.f)("selection","toggle-clusters-on"),b=Object(a.f)("selection","set-download-config"),v=Object(a.f)("selection","set-mouse-position"),C=Object(a.f)("select","sync-with-url"),_=Object(a.f)("selection","change-hovered-point"),O=Object(a.f)("selection","change-hovered-gallery-card"),S=Object(a.f)("selection","change-selected-album"),D=Object(a.f)("selection","toggle-gallery"),P=o.C,w="Nuclear Volume (fL)",j="Cellular Volume (fL)",E=o.x,A=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#ff00de","#24bcfa","#84df11","#ecc560","#ff72ff","#f58117","#f8311b","#5791db","#98b0d6","#11a89a","#a70009","#ff6200","#fddb02","#f7db78","#b15928","#f9a558"],k=["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],x=function(e){var t;return(t={},t[o.a]=o.l,t[o.F]=o.l,t[o.t]=o.l,t)[e]||o.l},N=(r={},r[o.l]="number of clusters",r[o.k]="distance between clusters",r)},J9Xn:function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"b",function(){return y});var r=n("kbi+"),o=n.n(r),a=n("M+Z9"),l=n.n(a),c=n("bndy"),i=(n.n(c),n("HbvT")),u=n("ydF9"),s=n("5mEf"),d=n("Ejqr"),f=Object(c.createSelector)([u.getAllAlbumData,s.getSelectedAlbum],function(e,t){return o()(e,{album_id:t})}),p=Object(c.createSelector)([f],function(e){return e?e.title:"My Selections"}),h=Object(c.createSelector)([f,s.getClickedScatterPoints],function(e,t){return e?e.cell_ids:t}),y=Object(c.createSelector)([u.getFullMetaDataArray,h],function(e,t){var n=[];return l()(t,function(t,n){var r=o()(e,function(e){return e.file_info[i.e]===n});if(r){var a=r.file_info,l=Object(d.c)(a),c=i.q+"&id="+Object(d.b)(a),u=r.measured_features[i.v];t.push({cellID:Number(n),downloadHref:c,labeledStructure:a[i.C],mitoticStage:u,src:l})}return t},n)})},JTb2:function(e,t,n){"use strict";n.d(t,"b",function(){return b}),n.d(t,"c",function(){return C}),n.d(t,"d",function(){return _}),n.d(t,"a",function(){return S});var r=n("O3gb"),o=n.n(r),a=n("q+Dy"),l=n.n(a),c=n("2247"),i=n.n(c),u=n("M+Z9"),s=n.n(u),d=n("L8MQ"),f=n.n(d),p=n("bndy"),h=(n.n(p),n("HbvT")),y=n("ydF9"),g=n("5mEf"),m=n("Ejqr"),b=Object(p.createSelector)([g.getFiltersToExclude,y.getProteinNames],function(e,t){return e.length>0&&e.length!==t.length}),v=Object(p.createSelector)([g.getColorBySelection,g.getProteinColors,y.getProteinNames,g.getFiltersToExclude],function(e,t,n,r){return e===h.C?n.map(function(e,n){return l()(r,e)?h.B:t[n]}):n.map(function(e,t){return l()(r,e)?h.B:h.n})}),C=Object(p.createSelector)([y.getProteinNames,g.getFiltersToExclude,y.getProteinTotals,v],function(e,t,n,r){return i()(n,function(n,o){return{checked:!l()(t,e[o]),color:r[o],id:e[o],name:e[o],total:n}})}),_=Object(p.createSelector)([g.getApplyColorToSelections,g.getSelectionSetColors,g.getSelectedGroupKeys,g.getSelectedSetTotals],function(e,t,n,r){return i()(n,function(n,o){var a=e?f()(t)[o]:h.n,l=Number(n)?o:n;return{color:a,id:n.toString(),name:l.toString(),total:r[o]}})}),O=Object(p.createSelector)([y.getProteinNames,y.getFileInfo,g.getDownloadConfig,g.getSelectedGroups],function(e,t,n,r){var o=[];if(n.type===h.o)return s()(t,function(e,t){return t[h.C]===n.key&&e.push(Object(m.b)(t)),e},o);if(n.type===h.p){var a=i()(r[n.key],Number);return s()(t,function(e,t){return l()(a,t[h.e])&&e.push(Object(m.b)(t)),e},o)}return o}),S=Object(p.createSelector)([O],function(e){var t=o()(e,300);return i()(t,function(e){return""+h.q+i()(e,function(e){return"&id="+e}).join("")})})},LLOI:function(e,t,n){"use strict";var r=n("GiK3"),o=n.n(r),a=n("1bZs"),l=function(e){return o.a.createElement("div",{className:a.follower,style:{left:e.pageX+10+"px",top:e.pageY+"px"}})};t.a=l},LQGz:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"f",function(){return a}),n.d(t,"b",function(){return l}),n.d(t,"e",function(){return c}),n.d(t,"d",function(){return i}),n.d(t,"a",function(){return u});var r=n("Ejqr"),o=Object(r.f)("metadata","receive"),a=Object(r.f)("metadata","request"),l=Object(r.f)("metadata","receive-cell-line-data"),c=Object(r.f)("metadata","request-cell-line-data"),i=Object(r.f)("metadata","request-album-data"),u=Object(r.f)("metadata","receive-album-data")},M40V:function(e,t,n){"use strict";var r=n("98+/"),o=n("/Z8b"),a=n("OkoZ"),l=n("5mEf"),c=n("hXJK");n.n(c);t.a={actions:r,logics:o.a,reducer:a.a,selectors:l,types:c}},M4gK:function(e,t){e.exports={"color-by-row":"style__color-by-row--3RQTv",colorByRow:"style__color-by-row--3RQTv","bar-chart-header":"style__bar-chart-header--2oblB",barChartHeader:"style__bar-chart-header--2oblB"}},NGSD:function(e,t,n){"use strict";var r=n("M4IF"),o=(n("Vg41"),n("zwGx")),a=(n("crfj"),n("hK1P")),l=(n("rpBe"),n("GiK3")),c=n.n(l),i=n("EsV9"),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=n("zH//"),d=function(e){function t(t){var n=e.call(this,t)||this;return n.onClose=n.onClose.bind(n),n}return u(t,e),t.prototype.onClose=function(e){var t=e.currentTarget,n=this.props.handleClose;t&&t.id&&n&&n(t.id)},t.prototype.render=function(){var e=this.props,t=e.closeable,n=e.hideable,l=e.id,u=e.color,d=e.name,f=e.total,p=e.onBarClicked,h=e.checked,y=e.downloadUrls,g=e.downloadConfig,m=e.handleDownload;return c.a.createElement("div",{className:s.container},c.a.createElement("div",{className:s.firstColumn},n&&c.a.createElement(a.a,{onChange:p,value:l,defaultChecked:!0,checked:h}),c.a.createElement(r.a,{style:{backgroundColor:u,padding:4},dot:!0}),c.a.createElement("span",{className:s.label},d)),c.a.createElement("div",null,c.a.createElement("span",{className:s.label},f),c.a.createElement(i.a,{color:u,id:l,name:d,total:f,downloadConfig:g,downloadUrls:y,handleDownload:m}),t&&c.a.createElement(o.a,{icon:"close",size:"small",id:l,ghost:!0,onClick:this.onClose})))},t.defaultProps={closeable:!1,downloadUrls:[],hideable:!0},t}(c.a.Component);t.a=d},OkoZ:function(e,t,n){"use strict";n.d(t,"b",function(){return g});var r,o=n("RyI1"),a=n.n(o),l=n("6PBa"),c=n.n(l),i=n("WIDu"),u=n.n(i),s=n("HbvT"),d=n("Ejqr"),f=n("J9+0"),p=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},h=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l},y=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e},g={applySelectionSetColoring:!0,cellSelectedFor3D:null,clusteringAlgorithm:s.t,clusteringDistance:"",colorBy:f.m,downloadConfig:{key:"",type:""},filterExclude:[],galleryCollapsed:!0,hoveredCardId:-1,hoveredPointId:-1,mousePosition:{pageX:0,pageY:0},numberOfClusters:"",plotByOnX:f.n,plotByOnY:f.o,proteinColors:f.l,selectedAlbum:f.p,selectedGroupColors:{},selectedGroups:{},selectedPoints:[],showClusters:!1},m=(r={},r[f.a]={accepts:function(e){return e.type===f.a},perform:function(e,t){var n;return p({},e,(n={},n[t.axisId]=t.payload,n))}},r[f.r]={accepts:function(e){return e.type===f.r},perform:function(e,t){return p({},e,{cellSelectedFor3D:t.payload})}},r[f.s]={accepts:function(e){return e.type===f.s},perform:function(e,t){var n,r;return p({},e,{selectedGroupColors:p({},e.selectedGroupColors,(n={},n[t.key]=f.q.splice(0,1)[0],n)),selectedGroups:p({},e.selectedGroups,(r={},r[t.key]=t.payload,r))})}},r[f.j]={accepts:function(e){return e.type===f.j},perform:function(e,t){return p({},e,{selectedGroupColors:c()(e.selectedGroupColors,function(e,n){return n.toString()!==t.payload.toString()}),selectedGroups:c()(e.selectedGroups,function(e,n){return n.toString()!==t.payload.toString()})})}},r[f.k]={accepts:function(e){return e.type===f.k},perform:function(e,t){return p({},e,{selectedPoints:a()(e.selectedPoints,function(e){return e!==t.payload})})}},r[f.t]={accepts:function(e){return e.type===f.t},perform:function(e,t){return p({},e,{selectedPoints:u()(y(e.selectedPoints,[t.payload]))})}},r[f.i]={accepts:function(e){return e.type===f.i},perform:function(e,t){return p({},e,{selectedPoints:y(g.selectedPoints)})}},r[f.z]={accepts:function(e){return e.type===f.z},perform:function(e,t){return p({},e,{filterExclude:t.payload})}},r[f.x]={accepts:function(e){return e.type===f.x},perform:function(e,t){return p({},e,{applySelectionSetColoring:t.payload})}},r[f.b]={accepts:function(e){return e.type===f.b},perform:function(e,t){return p({},e,{clusteringAlgorithm:t.payload})}},r[f.c]={accepts:function(e){return e.type===f.c},perform:function(e,t){var n;return p({},e,(n={},n[t.clusteringKey]=t.payload,n))}},r[f.y]={accepts:function(e){return e.type===f.y},perform:function(e,t){return p({},e,{showClusters:t.payload})}},r[f.u]={accepts:function(e){return e.type===f.u},perform:function(e,t){return p({},e,{downloadConfig:t.payload})}},r[f.v]={accepts:function(e){return e.type===f.v},perform:function(e,t){return p({},e,{mousePosition:t.payload})}},r[f.e]={accepts:function(e){return e.type===f.e},perform:function(e,t){return p({},e,{hoveredPointId:t.payload})}},r[f.d]={accepts:function(e){return e.type===f.d},perform:function(e,t){return p({},e,{hoveredCardId:t.payload})}},r[f.f]={accepts:function(e){return e.type===f.f},perform:function(e,t){return p({},e,{selectedAlbum:t.payload})}},r[f.A]={accepts:function(e){return e.type===f.A},perform:function(e,t){return p({},e,{galleryCollapsed:t.payload})}},r);t.a=Object(d.g)(m,g)},Sjo9:function(e,t,n){"use strict";var r=n("dexb"),o=(n("joUk"),n("zwGx")),a=(n("crfj"),n("hRRF")),l=(n("jIi2"),n("FC3+")),c=(n("baa2"),n("peDk")),i=(n("tKBd"),n("GiK3")),u=n.n(i),s=n("HbvT"),d=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},f=n("HtOV"),p=function(e){var t,n=function(){e.handleDeselectPoint(Number(e.cellID))},i=function(){e.handleOpenIn3D(e.cellID)},p=[u.a.createElement(o.a,{className:e.selected?f.disabled:"",key:e.cellID+"-load",onClick:i},"3D"),u.a.createElement(o.a,{key:e.cellID+"-download-link"},u.a.createElement("a",{href:e.downloadHref},u.a.createElement(l.a,{type:"download"}))),u.a.createElement(o.a,{onClick:n,key:e.cellID+"-close"},u.a.createElement(l.a,{type:"close"}))];return void 0!==e.mitoticStage&&(t=s.w[e.mitoticStage]),u.a.createElement(c.a.Item,d({key:e.cellID,className:f.container},{id:e.cellID?e.cellID.toString():"",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave}),u.a.createElement(a.a,{bordered:!0},u.a.createElement(a.a.Meta,{title:e.labeledStructure,avatar:e.src&&u.a.createElement("div",{onClick:i},u.a.createElement(r.a,{className:e.selected&&f.selected,alt:"thumbnail of microscopy image",src:""+s.G+e.src})),description:e.cellID}),t&&u.a.createElement("span",{className:f.stage},t),!e.empty&&u.a.createElement("div",{className:f.actionList},p)))};t.a=p},WeNn:function(e,t){e.exports={container:"style__container--1QLpn",menu:"style__menu--3nC0E"}},afXz:function(e,t,n){"use strict";n.d(t,"b",function(){return c});var r,o=n("Ejqr"),a=n("LQGz"),l=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},c={albums:[],cellLineDefs:{},featureData:[]},i=(r={},r[a.c]={accepts:function(e){return e.type===a.c},perform:function(e,t){return l({},e,{featureData:t.payload})}},r[a.b]={accepts:function(e){return e.type===a.b},perform:function(e,t){return l({},e,{cellLineDefs:t.payload})}},r[a.a]={accepts:function(e){return e.type===a.a},perform:function(e,t){return l({},e,{albums:t.payload})}},r);t.a=Object(o.g)(i,c)},cBQB:function(e,t,n){"use strict";var r=n("hRRF"),o=(n("jIi2"),n("FC3+"),n("baa2"),n("GiK3")),a=n.n(o),l=n("HbvT"),c=r.a.Meta,i=n("Aosa"),u=function(e){return a.a.createElement(r.a,{className:i.container,cover:e.src&&a.a.createElement("img",{alt:"thumbnail of microscopy image",src:""+l.G+e.src})},a.a.createElement(c,{description:e.description,title:e.title}))};t.a=u},eQc3:function(e,t,n){"use strict";var r=n("4EOq"),o=(n("YvKc"),n("FC3+")),a=(n("baa2"),n("GiK3")),l=n.n(a),c=n("18Ff"),i=function(){return l.a.createElement(r.a,{visibilityHeight:10,className:c.container},l.a.createElement("div",{className:c.backTopInner},l.a.createElement(o.a,{type:"caret-up"}),l.a.createElement("br",null)," To Plot"))};t.a=i},fEjp:function(e,t,n){"use strict";var r=n("dexb"),o=(n("joUk"),n("peDk")),a=(n("tKBd"),n("GiK3")),l=n.n(a),c=n("HbvT"),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},u=n("m6Ic"),s=function(e){var t=function(){e.handleOpenIn3D(e.cellID)};return l.a.createElement(o.a.Item,i({key:e.cellID,className:u.container},{id:e.cellID?e.cellID.toString():"",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave}),l.a.createElement(o.a.Item.Meta,{avatar:e.src&&l.a.createElement("div",{onClick:t},l.a.createElement(r.a,{className:e.selected&&u.selected,alt:"thumbnail of microscopy image",src:""+c.G+e.src}))}))};t.a=s},hXJK:function(e,t){},kZ4z:function(e,t){e.exports={container:"style__container--2ioFj","gallery-header":"style__gallery-header--24Z5z",galleryHeader:"style__gallery-header--24Z5z","side-bar-header":"style__side-bar-header--2r-CQ",sideBarHeader:"style__side-bar-header--2r-CQ","album-side-bar":"style__album-side-bar--37iVJ",albumSideBar:"style__album-side-bar--37iVJ",list:"style__list--2W8s7","gallery-header-actions":"style__gallery-header-actions--2WMv7",galleryHeaderActions:"style__gallery-header-actions--2WMv7","gallery-title":"style__gallery-title--1aUef",galleryTitle:"style__gallery-title--1aUef","search-for-cell":"style__search-for-cell--2min7",searchForCell:"style__search-for-cell--2min7"}},m6Ic:function(e,t){e.exports={container:"style__container--10CJo",infoList:"style__infoList--3Wsfn",actionList:"style__actionList--xnqBR",title:"style__title--h-otp",disabled:"style__disabled--3Z48w",selected:"style__selected--ZrI2K"}},mLcw:function(e,t,n){"use strict";function r(e){return{albumData:Object(S.getAllAlbumData)(e),clickedPoints:Object(P.getClickedScatterPoints)(e),data:Object(w.b)(e),ids:Object(P.getIds)(e),selectedAlbum:Object(P.getSelectedAlbum)(e),selectedAlbumName:Object(w.a)(e),selectedCell:Object(P.getSelected3DCell)(e)}}var o=n("zwGx"),a=(n("crfj"),n("QoDT")),l=(n("JYrs"),n("8rR3")),c=(n("gZEk"),n("FC3+")),i=(n("baa2"),n("A+AJ")),u=(n("LHBr"),n("peDk")),s=(n("tKBd"),n("KZPs")),d=(n("M24r"),n("gtac")),f=(n("tDqI"),n("FV1P")),p=(n("faxx"),n("q+Dy")),h=n.n(p),y=n("2247"),g=n.n(y),m=n("GiK3"),b=(n.n(m),n("RH2O")),v=n("Sjo9"),C=n("fEjp"),_=n("HbvT"),O=n("36g3"),S=n("ydF9"),D=n("98+/"),P=n("5mEf"),w=n("J9Xn"),j=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},A=i.a.Search,k=l.a.Item,x=n("kZ4z"),N={inputStatus:void 0,message:""},I={error:"That id is not in our dataset.",success:N.message,warning:"That cell is already in the gallery."},B=function(e){function t(t){var n=e.call(this,t)||this;return n.renderGalleryCard=n.renderGalleryCard.bind(n),n.renderMinGalleryCard=n.renderMinGalleryCard.bind(n),n.searchValidate=n.searchValidate.bind(n),n.resetSearch=n.resetSearch.bind(n),n.hoverCard=n.hoverCard.bind(n),n.unHover=n.unHover.bind(n),n.renderCollapsedView=n.renderCollapsedView.bind(n),n.renderFullView=n.renderFullView.bind(n),n.selectAlbum=n.selectAlbum.bind(n),n.closeGallery=n.closeGallery.bind(n),n.selectCell=n.selectCell.bind(n),n.endOfAlbum=m.createRef(),n.state=E({},N),n}return j(t,e),t.prototype.componentDidMount=function(){(0,this.props.getAlbumData)()},t.prototype.componentDidUpdate=function(e){var t=this.endOfAlbum,n=this.props.clickedPoints;t.current&&e.clickedPoints.length!==n.length&&t.current.scrollIntoView({behavior:"smooth"})},t.prototype.searchValidate=function(e){var t=this.props,n=t.clickedPoints,r=t.ids,o=t.addSearchedCell;return h()(g()(n,function(e){return e.toString()}),e)?this.setState({inputStatus:"warning",message:I.warning}):h()(r,e)?(o(e),this.setState({inputStatus:"success",message:I.success})):void this.setState({inputStatus:"error",message:I.error})},t.prototype.resetSearch=function(){this.setState({inputStatus:N.inputStatus,message:N.message})},t.prototype.selectAlbum=function(e){var t=e.target,n=this.props.handleSelectAlbum;t&&n(t.value)},t.prototype.renderAlbumButtons=function(){var e=this.props,t=e.albumData,n=e.selectedAlbum,r=e.clickedPoints;return m.createElement(k,{label:"ALBUMS"},m.createElement(d.c.Group,{defaultValue:n,onChange:this.selectAlbum,size:"large"},m.createElement(d.c.Button,{key:"my-selections",value:_.x},"My Selections ("+r.length+")"),g()(t,function(e){return e.cell_ids.length>0&&m.createElement(d.c.Button,{key:e.album_id,value:e.album_id},e.title," (",e.cell_ids.length,")")})))},t.prototype.closeGallery=function(){(0,this.props.toggleGallery)(!0)},t.prototype.selectCell=function(e){var t=this.props.handleOpenIn3D;return setTimeout(window.scroll({behavior:"smooth",left:0,top:2500}),3e3),this.closeGallery(),t(e)},t.prototype.renderFullView=function(){var e=this.props,t=e.data,n=e.handleClearAllSelectedPoints,r=e.selectedAlbum,l=e.selectedAlbumName;return m.createElement(f.a,{id:"gallery",className:x.container,type:"flex",gutter:32,justify:"space-between"},m.createElement(a.a,{className:x.galleryGrid},m.createElement("div",{className:x.galleryHeader},m.createElement("h2",null,l),t.length>0&&!r&&m.createElement(s.a,{title:"Are you sure you want to unselect all?",onConfirm:n,okText:"Yes",cancelText:"No"},m.createElement(o.a,{icon:"close",type:"primary"},"Clear All"))),m.createElement(u.a,{itemLayout:"horizontal",grid:{gutter:16},className:x.list,dataSource:t.length>0?t:[{empty:!0}],renderItem:this.renderGalleryCard,footer:m.createElement("div",{ref:this.endOfAlbum})})),m.createElement(a.a,{className:x.albumSideBar},m.createElement("div",{className:x.sideBarHeader},m.createElement("h2",null,m.createElement(c.a,{type:"picture"}),"  Gallery"),m.createElement(c.a,{type:"close",style:{fontSize:"2em"},onClick:this.closeGallery})),m.createElement(k,{hasFeedback:!0,className:x.searchForCell,validateStatus:this.state.inputStatus,help:this.state.message},m.createElement(A,{placeholder:"add image by cell id",onSearch:this.searchValidate,onChange:this.resetSearch})),this.renderAlbumButtons()))},t.prototype.renderCollapsedView=function(){var e=this.props.data;return m.createElement("div",{id:"gallery",className:x.container},m.createElement("div",{className:x.galleryHeader},m.createElement("h2",null,m.createElement(c.a,{type:"picture"}),"  Gallery")),m.createElement(u.a,{itemLayout:"horizontal",dataSource:e.length>0?e:[{empty:!0}],renderItem:this.renderMinGalleryCard,footer:m.createElement("div",{ref:this.endOfAlbum})}))},t.prototype.render=function(){return this.props.collapsed?this.renderCollapsedView():this.renderFullView()},t.prototype.hoverCard=function(e){var t=e.currentTarget,n=this.props.setHovered;if(t.id)return n(Number(t.id));n(Number(-1))},t.prototype.unHover=function(){(0,this.props.setHovered)(Number(-1))},t.prototype.renderMinGalleryCard=function(e){var t=this.props,n=t.handleDeselectPoint,r=t.selectedCell;return m.createElement(C.a,{onMouseEnter:this.hoverCard,onMouseLeave:this.unHover,labeledStructure:e.labeledStructure,src:e.src,selected:r===e.cellID,downloadHref:e.downloadHref,cellID:e.cellID,handleDeselectPoint:n,handleOpenIn3D:this.selectCell,empty:e.empty})},t.prototype.renderGalleryCard=function(e){var t=this.props,n=t.handleDeselectPoint,r=t.selectedCell;return m.createElement(v.a,{onMouseEnter:this.hoverCard,onMouseLeave:this.unHover,labeledStructure:e.labeledStructure,mitoticStage:e.mitoticStage,src:e.src,selected:r===e.cellID,downloadHref:e.downloadHref,cellID:e.cellID,handleDeselectPoint:n,handleOpenIn3D:this.selectCell,empty:e.empty})},t}(m.Component),M={addSearchedCell:D.selectPoint,getAlbumData:O.requestAlbumData,handleClearAllSelectedPoints:D.clearAllSelectedPoints,handleDeselectPoint:D.deselectPoint,handleOpenIn3D:D.selectCellFor3DViewer,handleSelectAlbum:D.selectAlbum,setHovered:D.setHoveredGalleryCard};t.a=Object(b.b)(r,M)(B)},mVQi:function(e,t,n){"use strict";var r=n("hygk"),o=n.n(r),a=n("GiK3"),l=n.n(a),c=n("JNDO"),i=n.n(c),u=n("HbvT"),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},f=function(e){function t(n){var r=e.call(this,n)||this;return r.makeAnnotations=r.makeAnnotations.bind(r),r.clickedAnnotation=r.clickedAnnotation.bind(r),r.state={layout:{annotations:r.makeAnnotations(),autosize:!0,height:u.s.plotHeight,hovermode:"closest",legend:u.s.legend,margin:{b:20,r:20,t:10},paper_bgcolor:u.s.backgroundColor,plot_bgcolor:u.s.backgroundColor,xaxis:t.makeAxis([0,.85],".1f",!1),xaxis2:t.makeAxis([.86,1],"f",!0),yaxis:t.makeAxis([0,.85],".1f",!1),yaxis2:t.makeAxis([.86,1],"f",!0)},showFullAnnotation:!0},r}return s(t,e),t.makeAxis=function(e,t,n){return{color:u.s.textColor,domain:e,hoverformat:t,linecolor:u.s.textColor,showgrid:!1,tickcolor:u.s.textColor,zeroline:n}},t.prototype.componentDidUpdate=function(e){o()(e.annotations,this.props.annotations)||this.setState({layout:d({},this.state.layout,{annotations:this.makeAnnotations()})})},t.prototype.clickedAnnotation=function(){this.setState({showFullAnnotation:!1})},t.prototype.makeAnnotations=function(){var e=this,t=this.props.annotations,n=function(e,t){return t?"Cell "+e.cellID+"<br><i>click thumbnail in gallery to load in 3D</i>":e.hovered?"Cell "+e.cellID:""};return t.map(function(r,o){var a=o+1===t.length,l=a&&e.state.showFullAnnotation,c=!!l||!!r.hovered;return{arrowcolor:r.hovered?"#7440f1":"#ffffffab",arrowhead:6,ax:0,ay:l?-60:r.hovered?-20:0,bgcolor:"#00000094",bordercolor:r.hovered?"#7440f1":"#ffffffab",borderpad:c?4:0,borderwidth:1,captureevents:!0,cellID:r.cellID,cellLine:r.cellLine,font:{color:"#ffffff",family:"tahoma, arial, verdana, sans-serif",size:11},fovID:r.fovID,pointIndex:r.pointIndex,text:n(r,l),x:r.x,y:r.y}})},t.prototype.render=function(){var e=this.props,t=e.onPointClicked,n=e.onPlotHovered,r=e.onGroupSelected,o=e.plotDataArray,a={displayModeBar:!0,displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud","toImage","resetScale2d","hoverClosestCartesian","hoverCompareCartesian","toggleSpikelines"]};return l.a.createElement(i.a,{data:o,useResizeHandler:!0,layout:this.state.layout,config:a,onClick:t,onClickAnnotation:this.clickedAnnotation,onHover:n,onSelected:r})},t}(l.a.Component);t.a=f},ndGJ:function(e,t,n){"use strict";n.d(t,"c",function(){return s});var r=n("afXz"),o=n("OkoZ"),a=n("1eoa");n.d(t,"d",function(){return a.a});var l=n("M40V");n.d(t,"e",function(){return l.a});var c=n("nktv");n.d(t,"a",function(){return c.a});var i=n("Ejqr");n.d(t,"b",function(){return i.d});var u=n("CMO8"),s=(n.n(u),Object.freeze({metadata:r.b,selection:o.b}))},nktv:function(e,t,n){"use strict";function r(e){var t=Object(u.b)(y);t.addDeps(g);var n=Object(i.a)(t),r=Object(d.b)(Object(i.c)(h),d.c);if(e){var o=c()({},d.c,e);return Object(i.d)(r,o,n)}return Object(i.d)(r,n)}t.a=r;var o=n("mtWM"),a=n.n(o),l=n("HN2V"),c=n.n(l),i=n("2KeS"),u=n("E0Bt"),s=n("HbvT"),d=n("ndGJ"),f=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l},p=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e},h={metadata:d.d.reducer,selection:d.e.reducer},y=p(d.d.logics,d.e.logics),g={baseApiUrl:s.c,httpClient:a.a}},otLN:function(e,t,n){"use strict";function r(e){return{galleryCollapsed:s.a.selectors.getGalleryCollapsed(e),selected3DCell:s.a.selectors.getSelected3DCell(e),selected3DCellCellLine:s.a.selectors.getSelected3DCellCellLine(e),selected3DCellFOV:s.a.selectors.getSelected3DCellFOV(e),selected3DCellProteinName:s.a.selectors.getSelected3DCellLabeledProtein(e),selected3DCellStructureName:s.a.selectors.getSelected3DCellLabeledStructure(e)}}var o=n("FC3+"),a=(n("baa2"),n("oKZP")),l=(n("YH+2"),n("WIDu")),c=n.n(l),i=n("GiK3"),u=(n.n(i),n("RH2O")),s=n("M40V"),d=n("eQc3"),f=n("FB2F"),p=n("43Sq"),h=n("+hq8"),y=n("mLcw"),g=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l},b=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e},v=a.a.Content,C=a.a.Header,_=a.a.Sider,O=n("3r/D"),S=function(e){function t(n){var r=e.call(this,n)||this;return r.state={defaultActiveKey:[t.panelKeys[0]],openKeys:[t.panelKeys[0]]},r.onSelectionToolUsed=r.onSelectionToolUsed.bind(r),r.onPanelClicked=r.onPanelClicked.bind(r),r}return g(t,e),t.prototype.onSelectionToolUsed=function(){this.setState({openKeys:c()(b(this.state.openKeys,[t.panelKeys[1]]))})},t.prototype.onPanelClicked=function(e){this.setState({openKeys:e})},t.prototype.render=function(){var e=this.props,n=e.galleryCollapsed,r=e.selected3DCell,l=e.selected3DCellFOV,c=e.selected3DCellCellLine,u=e.selected3DCellProteinName,s=e.selected3DCellStructureName,g=e.toggleGallery,m=this.state,b=m.openKeys,S=m.defaultActiveKey;return i.createElement(a.a,{className:O.container,tagName:"section"},i.createElement(d.a,null),i.createElement(_,{width:"100%",collapsible:!0,collapsed:n,onCollapse:g,defaultCollapsed:!0,collapsedWidth:100,className:O.sider,reverseArrow:!0},i.createElement(y.a,{collapsed:n,toggleGallery:g})),i.createElement(a.a,{tagName:"section",className:n?O.noBlur:O.blur},i.createElement(C,{className:O.headerSection,tagName:"header"},i.createElement("h2",null,i.createElement(o.a,{type:"dot-chart"})," Plot")),i.createElement(a.a,{tagName:"section"},i.createElement(_,{className:O.colorMenu,width:450,collapsible:!1,collapsedWidth:250},i.createElement(p.a,{panelKeys:t.panelKeys,openKeys:b,defaultActiveKey:S,onPanelClicked:this.onPanelClicked})),i.createElement(v,{className:O.content,tagName:"main"},i.createElement("div",{className:O.plotView},i.createElement(h.a,{handleSelectionToolUsed:this.onSelectionToolUsed,galleryCollapsed:n}))),i.createElement(_,null)),i.createElement("div",{className:O.cellViewerContainer},i.createElement(C,{className:O.headerSection,tagName:"header"},i.createElement("h2",{className:O.header},i.createElement(o.a,{type:"sync"})," 3D Viewer"),r&&s&&i.createElement("h4",{className:O.selectedInfo},i.createElement("span",{className:O.label},"Viewing cell:")," ",r,",",i.createElement("span",{className:O.label}," Protein (structure): "),u," (",s,")")),i.createElement(f.a,{cellId:r,fovId:l,cellLineName:c}))))},t.panelKeys=["proteinNames","selections","clusters"],t}(i.Component),D={toggleGallery:s.a.actions.toggleGallery};t.a=Object(u.b)(r,D)(S)},qA08:function(e,t,n){"use strict";var r=n("QoDT"),o=(n("JYrs"),n("FV1P")),a=(n("faxx"),n("t5Df")),l=(n("9SSc"),n("GiK3")),c=n.n(l),i=n("rfDJ"),u=function(e){return e.includeCol?c.a.createElement(o.a,{className:i.colorByRow,type:"flex",align:"middle"},c.a.createElement(r.a,{span:e.includeCol},c.a.createElement("label",{className:i.label},"Color by:"),c.a.createElement(a.a,{className:i.colorBySwitch,defaultChecked:e.defaultChecked,checkedChildren:e.checkedChildren,unCheckedChildren:e.unCheckedChildren,onChange:e.handleChange})),e.children):c.a.createElement(o.a,{className:i.colorByRow,type:"flex",align:"middle"},c.a.createElement("label",{className:i.label},e.label),c.a.createElement(a.a,{className:i.colorBySwitch,defaultChecked:e.defaultChecked,onChange:e.handleChange}))};t.a=u},qMEF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7N90"),o=(n.n(r),n("wg8Y")),a=(n.n(o),n("/Ife")),l=(n.n(a),n("6Mro")),c=n("ciQf"),i=n.n(c),u=n("uhVB"),s=n("GiK3"),d=(n.n(s),n("O27J")),f=(n.n(d),n("RH2O")),p=n("HbvT"),h=n("otLN"),y=n("ndGJ"),g=n("wRi7"),m=new u.a(i()()),b=Object(y.a)({selection:g.a.toAppState(m.getParams())}),v=new l.a(function(e){b.dispatch(y.e.actions.syncStateWithURL(e.data))});m.onChange(function(e){try{v.postMessage(e)}catch(e){}}),b.subscribe(function(){var e=b.getState();m.replaceParams(g.a.toUrlSearchParameterMap(e.selection))}),Object(d.render)(s.createElement(f.a,{store:b},s.createElement(h.a,null)),document.getElementById(p.b))},rfDJ:function(e,t){e.exports={"color-by-switch":"style__color-by-switch--LlTQq",colorBySwitch:"style__color-by-switch--LlTQq","color-by-row":"style__color-by-row--2738P",colorByRow:"style__color-by-row--2738P",label:"style__label--3W_cl"}},wRi7:function(e,t,n){"use strict";var r=n("AVgl"),o=(n.n(r),n("gGqR")),a=(n.n(o),n("4nqc"));n.d(t,"a",function(){return a.a})},wwhR:function(e,t,n){"use strict";var r=n("2247"),o=n.n(r),a=n("GiK3"),l=n.n(a),c=n("NGSD"),i=function(e){var t=e.closeable,n=e.downloadUrls,r=e.handleCloseSelectionSet,a=e.handleDownload,i=e.downloadConfig,u=e.hideable,s=e.onBarClicked,d=e.panelData;return l.a.createElement(l.a.Fragment,null,o()(d,function(e){return l.a.createElement(c.a,{key:e.name,closeable:t,checked:e.checked,hideable:u,color:e.color,name:e.name,total:e.total,id:e.id,onBarClicked:s,handleClose:r,handleDownload:a,downloadUrls:n,downloadConfig:i})}))};t.a=i},ydF9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"getFullMetaDataArray",function(){return y}),n.d(t,"getFullCellLineDefs",function(){return g}),n.d(t,"getAllAlbumData",function(){return m}),n.d(t,"getFileInfo",function(){return b}),n.d(t,"getMeasuredData",function(){return v}),n.d(t,"getClusterData",function(){return C}),n.d(t,"getFeatureNames",function(){return _}),n.d(t,"getProteinLabels",function(){return O}),n.d(t,"getProteinNames",function(){return S}),n.d(t,"getProteinTotals",function(){return D}),n.d(t,"getClusterNames",function(){return P});var r=n("ktak"),o=n.n(r),a=n("2247"),l=n.n(a),c=n("M+Z9"),i=n.n(c),u=n("WIDu"),s=n.n(u),d=n("L8MQ"),f=n.n(d),p=n("bndy"),h=(n.n(p),n("HbvT")),y=function(e){return e.metadata.featureData},g=function(e){return e.metadata.cellLineDefs},m=function(e){return e.metadata.albums},b=Object(p.createSelector)([y],function(e){return l()(e,"file_info")}),v=Object(p.createSelector)([y],function(e){return l()(e,"measured_features")}),C=Object(p.createSelector)([y],function(e){return l()(e,"clusters")}),_=Object(p.createSelector)([v],function(e){return o()(e[0])}),O=Object(p.createSelector)([b],function(e){return l()(e,h.C)}),S=Object(p.createSelector)([b],function(e){return s()(l()(e,h.C)).sort(function(e,t){return t>e?-1:e>t?1:0})}),D=Object(p.createSelector)([b,S],function(e,t){var n=i()(e,function(e,n){var r=t.indexOf(n[h.C]);return e[r]?e[r]++:e[r]=1,e},{});return f()(n)}),P=Object(p.createSelector)([C],function(e){return o()(e[0])})},"zH//":function(e,t){e.exports={container:"style__container--2a80r",label:"style__label--qfuCJ","first-column":"style__first-column--3dKE9",firstColumn:"style__first-column--3dKE9"}}},["qMEF"]);